<!DOCTYPE html>
<!-- saved from url=(0073)http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api -->
<html itemscope="" itemtype="http://schema.org/QAPage"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>java - Thread safe REST API - Code Review Stack Exchange</title>
    <link rel="shortcut icon" href="http://cdn.sstatic.net/Sites/codereview/img/favicon.ico?v=00b9e479193f">
    <link rel="apple-touch-icon image_src" href="http://cdn.sstatic.net/Sites/codereview/img/apple-touch-icon.png?v=0a72875519a4">
    <link rel="search" type="application/opensearchdescription+xml" title="Code Review Stack Exchange" href="http://codereview.stackexchange.com/opensearch.xml">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@StackCodeReview">
    <meta name="twitter:domain" content="codereview.stackexchange.com">
    <meta property="og:type" content="website">

    <meta property="og:image" itemprop="image primaryImageOfPage" content="http://cdn.sstatic.net/Sites/codereview/img/apple-touch-icon@2.png?v=a4f1c838ba2c&amp;a">
    <meta name="twitter:title" property="og:title" itemprop="title name" content="Thread safe REST API">
    <meta name="twitter:description" property="og:description" itemprop="description" content="My assignment was to develop a REST service that will provide Airport information. This service is assumed to be used by multiple users, therefore data consistency (thread safety) and responding fa...">
    <meta property="og:url" content="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api">
    <link rel="canonical" href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api">

    
    
    <script async="" src="./java - Thread safe REST API - Code Review Stack Exchange_files/quant.js.download"></script><script async="" src="./java - Thread safe REST API - Code Review Stack Exchange_files/beacon.js.download"></script><script async="" src="./java - Thread safe REST API - Code Review Stack Exchange_files/analytics.js.download"></script><script src="./java - Thread safe REST API - Code Review Stack Exchange_files/jquery.min.js.download"></script>
    <script src="./java - Thread safe REST API - Code Review Stack Exchange_files/stub.en.js.download"></script>
    <link rel="stylesheet" type="text/css" href="./java - Thread safe REST API - Code Review Stack Exchange_files/all.css">

            <link rel="alternate" type="application/atom+xml" title="Feed for question &#39;Thread safe REST API&#39;" href="http://codereview.stackexchange.com/feeds/question/124177">
            <meta name="twitter:app:country" content="US">
            <meta name="twitter:app:name:iphone" content="Stack Exchange iOS">
            <meta name="twitter:app:id:iphone" content="871299723">
            <meta name="twitter:app:url:iphone" content="se-zaphod://codereview.stackexchange.com/questions/124177/thread-safe-rest-api">
            <meta name="twitter:app:name:ipad" content="Stack Exchange iOS">
            <meta name="twitter:app:id:ipad" content="871299723">
            <meta name="twitter:app:url:ipad" content="se-zaphod://codereview.stackexchange.com/questions/124177/thread-safe-rest-api">
            <meta name="twitter:app:name:googleplay" content="Stack Exchange Android">
            <meta name="twitter:app:url:googleplay" content="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api">
            <meta name="twitter:app:id:googleplay" content="com.stackexchange.marvin">
        <script>
        
            StackExchange.ready(function () {
                    
                    StackExchange.using("snippets", function () {
                        StackExchange.snippets.initSnippetRenderer();
                    });
                    

                StackExchange.using("postValidation", function () {
                    StackExchange.postValidation.initOnBlurAndSubmit($('#post-form'), 2, 'answer');
                });

                
                StackExchange.question.init({showAnswerHelp:true,totalCommentCount:0,shownCommentCount:0,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:124177});

                styleCode();

                    StackExchange.realtime.subscribeToQuestion('196', '124177');
                                                                    StackExchange.using("gps", function () { StackExchange.gps.trackOutboundClicks('#content', '.post-text'); });

            });
        </script>

                <script type="text/x-mathjax-config">
                    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
                                        tex2jax: { inlineMath: [ ["\\$", "\\$"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
                                        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
                                        messageStyle: "none"
                });
                </script>        
            <script src="./java - Thread safe REST API - Code Review Stack Exchange_files/MathJax.js.download"></script>  

    <script>
        StackExchange.ready(function () {
                        StackExchange.realtime.init('wss://qa.sockets.stackexchange.com,ws://qa.sockets.stackexchange.com');
            StackExchange.realtime.subscribeToReputationNotifications('196');
                StackExchange.realtime.subscribeToTopBarNotifications('196');
        });
    </script>
    <script>
        StackExchange.init({"locale":"en","stackAuthUrl":"https://stackauth.com","networkMetaHostname":"meta.stackexchange.com","serverTime":1477518426,"routeName":"Questions/Show","site":{"name":"Code Review Stack Exchange","description":"Q&A for peer programmer code reviews","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LdsB7sSAAAAAAzjgEF_Hd8vXv-C42sa_KyofaGR","recaptchaAudioLang":"en","enableNewTagCreationWarning":false,"insertSpaceAfterNameTabCompletion":false,"id":196,"enableInsertDocLinkDialog":false,"enableSocialMediaInSharePopup":true},"user":{"fkey":"40041c037e38a37a7adbd81589319251","rep":0,"isAnonymous":true,"isAnonymousOnThisSite":true},"realtime":{"newest":true,"active":true,"tagged":true,"workerIframeDomain":"http://cdn.sstatic.net"},"events":{"postType":{"question":1},"postEditionSection":{"title":1,"body":2,"tags":3}}}, {"site":{"allowImageUploads":true,"enableUserHovercards":true,"styleCode":true},"tags":{},"accounts":{"currentPasswordRequiredForChangingStackIdPassword":true},"flags":{"allowRetractingFlags":true},"snippets":{"snippetsEnabled":true,"renderDomain":"stacksnippets.net"},"markdown":{"asteriskIntraWordEmphasis":true}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.en.js":"aec4433d537e","js/moderator.en.js":"1e6659dca06d","js/full-anon.en.js":"a2e7e09793c2","js/full.en.js":"e12550ae0b71","js/wmd.en.js":"772310d0d1b6","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/third-party/jquery.autocomplete.min.en.js":"","js/mobile.en.js":"c84249f40166","js/help.en.js":"c8004cc0095d","js/tageditor.en.js":"2178711359dd","js/tageditornew.en.js":"a6edafd3cc4c","js/inline-tag-editing.en.js":"2ddfa79492e7","js/revisions.en.js":"8f22ba768cac","js/review.en.js":"472dde667bd9","js/tagsuggestions.en.js":"78eee7c19ab2","js/post-validation.en.js":"830cfda47939","js/explore-qlist.en.js":"d33e3ab2f2e0","js/events.en.js":"8cb1023d15ec","js/keyboard-shortcuts.en.js":"2f0c08479107","js/external-editor.en.js":"5e655ceb5a5b","js/mathjax-editing.en.js":"24f1e59e0eea","js/external-editor.en.js":"5e655ceb5a5b","js/snippet-javascript.en.js":"d6bd90f90276","js/snippet-javascript-codemirror.en.js":"a263bba721eb"});
        StackExchange.using("gps", function() {
             StackExchange.gps.init(true);
        });
    </script>
    
        <script>
            StackExchange.ready(function () {
                $('#nav-tour').click(function () {
                    StackExchange.using("gps", function() {
                        StackExchange.gps.track("aboutpage.click", { aboutclick_location: "headermain" }, true);
                    });
                });
            });
        </script>
<script async="" src="./java - Thread safe REST API - Code Review Stack Exchange_files/full-anon.en.js.download"></script><script async="" src="./java - Thread safe REST API - Code Review Stack Exchange_files/snippet-javascript.en.js.download"></script><script async="" src="./java - Thread safe REST API - Code Review Stack Exchange_files/post-validation.en.js.download"></script><script async="" src="./java - Thread safe REST API - Code Review Stack Exchange_files/prettify-full.en.js.download"></script><script async="" src="./java - Thread safe REST API - Code Review Stack Exchange_files/external-editor.en.js.download"></script></head>
<body class="question-page new-topbar">
    <noscript>&lt;div id="noscript-padding"&gt;&lt;/div&gt;</noscript>
    



    <div id="notify-container"></div>
    <div id="custom-header"></div>





<div class="topbar">
    <div class="topbar-wrapper">

        <div class="js-topbar-dialog-corral">


    <div class="topbar-dialog siteSwitcher-dialog dno">
        <div class="header">
            <h3><a href="http://codereview.stackexchange.com/">current community</a>
            </h3>
        </div>
        <div class="modal-content current-site-container">
            <ul class="current-site">
                    <li>
                            <div class="related-links">
                    <a href="http://chat.stackexchange.com/?tab=site&amp;host=codereview.stackexchange.com" class="js-gps-track" data-gps-track="site_switcher.click({ item_type:6 })">chat</a>
                    <a href="http://codereview.stackexchange.com/users/logout" class="js-gps-track" data-gps-track="site_switcher.click({ item_type:8 })">log out</a>
    </div>




    <a href="http://codereview.stackexchange.com/" class="current-site-link site-link js-gps-track" data-id="196" data-gps-track="
        site_switcher.click({ item_type:3 })">
        <div class="site-icon favicon favicon-codereview" title="Code Review"></div>
        Code Review
    </a>

                    </li>
                    <li class="related-site">
                            <div class="L-shaped-icon-container">
        <span class="L-shaped-icon"></span>
    </div>

                        



    <a href="http://meta.codereview.stackexchange.com/" class="site-link js-gps-track" data-id="198" data-gps-track="
            site.switch({ target_site:198, item_type:3 }),
        site_switcher.click({ item_type:4 })">
        <div class="site-icon favicon favicon-codereviewmeta" title="Code Review Meta"></div>
        Code Review Meta
    </a>

                    </li>
            </ul>
        </div>

        <div class="header" id="your-communities-header">
            <h3>
                    <a href="http://stackexchange.com/users/6530852/?tab=accounts">your communities</a>
            </h3>

                <a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" id="edit-pinned-sites">edit</a>
                <a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" id="cancel-pinned-sites" style="display: none;">cancel</a>
        </div>
        <div class="modal-content" id="your-communities-section">

                <ul class="my-sites">
                        <li>
                            



    <a href="http://stackoverflow.com/" class="site-link js-gps-track" data-id="1" data-gps-track="
            site.switch({ target_site:1, item_type:3 }),
        site_switcher.click({ item_type:1 })">
        <div class="site-icon favicon favicon-stackoverflow" title="Stack Overflow"></div>
        Stack Overflow
            <span class="rep-score">41</span>
    </a>

                        </li>
                        <li>
                            



    <a href="http://es.stackoverflow.com/" class="site-link js-gps-track" data-id="637" data-gps-track="
            site.switch({ target_site:637, item_type:3 }),
        site_switcher.click({ item_type:1 })">
        <div class="site-icon favicon favicon-es" title="Stack Overflow en español"></div>
        Stack Overflow en español
            <span class="rep-score">1</span>
    </a>

                        </li>
                </ul>
                    <div class="pinned-site-editor-container" style="display: none;">
                        <input id="js-site-search-txt" type="text" class="site-filter-input" value="" placeholder="Add a Stack Exchange community">
                        <input type="submit" id="pin-site-btn" value="Add" disabled="disabled">
                        <ul class="js-found-sites found-sites"></ul>
                        <ul class="pinned-site-list sortable" data-custom-list="False">
                        </ul>
                        <input type="submit" value="Save" id="save-pinned-sites-btn" disabled="disabled">
                        <a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" id="reset-pinned-sites">reset to default list</a>
                    </div>
        </div>

        <div class="header">
            <h3><a href="http://stackexchange.com/sites">more stack exchange communities</a>
            </h3>
            <a href="http://blog.stackoverflow.com/" class="fr">company blog</a>
        </div>
        <div class="modal-content">
                <div class="child-content"></div>
        </div>        
    </div>
        </div>

        <div class="network-items">
                <a href="http://stackexchange.com/" class="topbar-icon icon-site-switcher yes-hover js-site-switcher-button js-gps-track" data-gps-track="site_switcher.show" title="A list of all 162 Stack Exchange sites">
                    <span class="hidden-text">Stack Exchange</span>
                </a>

    <a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" class="topbar-icon icon-inbox yes-hover js-inbox-button" title="Recent inbox messages">
        <span class="hidden-text">Inbox</span>
        <span class="unread-count" style="display:none"></span>
    </a>
    <a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" class="topbar-icon icon-achievements yes-hover js-achievements-button" data-unread-class="" title="Recent achievements: reputation, badges, and privileges earned">
        <span class="hidden-text">Reputation and Badges</span>
        <span class="unread-count" style="display:none">
            
        </span>
    </a>
        </div>

        <div class="topbar-links">

                <div class="links-container">
                <span class="topbar-menu-links">
                                <a href="https://codereview.stackexchange.com/users/join?ssrc=head&amp;returnurl=http%3a%2f%2fcodereview.stackexchange.com%2fquestions%2f124177%2fthread-safe-rest-api" class="login-link">join this community</a>

                            <a href="http://codereview.stackexchange.com/tour">tour</a>
        <a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" class="icon-help js-help-button" title="Help Center and other resources">
            help
            <span class="triangle"></span>
        </a>
    <div class="topbar-dialog help-dialog js-help-dialog dno">
        <div class="modal-content">
            <ul>
                                    <li>
                        <a href="http://codereview.stackexchange.com/tour" class="js-gps-track" data-gps-track="help_popup.click({ item_type:1 })">
                            Tour
                            <span class="item-summary">
                                Start here for a quick overview of the site
                            </span>
                        </a>
                    </li>
                <li>
                    <a href="http://codereview.stackexchange.com/help" class="js-gps-track" data-gps-track="help_popup.click({ item_type:4 })">
                        Help Center
                        <span class="item-summary">
                            Detailed answers to any questions you might have
                        </span>
                    </a>
                </li>
                        <li>
                            <a href="http://meta.codereview.stackexchange.com/" class="js-gps-track" data-gps-track="help_popup.click({ item_type:2 })">
                                Meta
                                <span class="item-summary">
                                    Discuss the workings and policies of this site
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="http://stackoverflow.com/company/about" class="js-gps-track" data-gps-track="help_popup.click({ item_type:6 })">
                                About Us
                                <span class="item-summary">
                                    Learn more about Stack Overflow the company
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="http://business.stackoverflow.com/?ref=topbar_help" class="js-gps-track" data-gps-track="help_popup.click({ item_type:7 })">
                                Business
                                <span class="item-summary">
                                    Learn more about hiring developers or posting ads with us
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
                                            </span>
                </div>

            <div class="search-container">
                <form id="search" action="http://codereview.stackexchange.com/search" method="get" autocomplete="off">
                    <input name="q" type="text" placeholder="Search Q&amp;A" value="" tabindex="1" autocomplete="off" maxlength="240">
                </form>
            </div>

        </div>
    </div>
</div>
    <script>
        StackExchange.ready(function() { StackExchange.topbar.init(); });
    </script>

    <div class="container">
        <div id="header">
            <br class="cbt">
            <div id="hlogo">
                <a href="http://codereview.stackexchange.com/">
                    Code Review
                </a>
            </div>
            <div id="hmenus">
                <div class="nav mainnavs">
                    <ul>
                            <li class="youarehere">
        <a id="nav-questions" href="http://codereview.stackexchange.com/questions" class="js-gps-track" data-gps-track="top_nav.click({is_current:true, location:3, destination:1})">
        Questions
        </a>
    </li>

                                                    <li>
        <a id="nav-tags" href="http://codereview.stackexchange.com/tags" class="js-gps-track" data-gps-track="top_nav.click({is_current:false, location:3, destination:2})">
        Tags
        </a>
    </li>

                            <li>
        <a id="nav-users" href="http://codereview.stackexchange.com/users" class="js-gps-track" data-gps-track="top_nav.click({is_current:false, location:3, destination:3})">
        Users
        </a>
    </li>

                            <li>
        <a id="nav-badges" href="http://codereview.stackexchange.com/help/badges" class="js-gps-track" data-gps-track="top_nav.click({is_current:false, location:3, destination:4})">
        Badges
        </a>
    </li>

    <li>
        <a id="nav-unanswered" href="http://codereview.stackexchange.com/unanswered" class="js-gps-track" data-gps-track="top_nav.click({is_current:false, location:3, destination:5})">
        Unanswered
        </a>
    </li>
                    </ul>
                </div>
                <div class="nav askquestion">
                    <ul>
                        <li>
                            <a id="nav-askquestion" href="http://codereview.stackexchange.com/questions/ask">Ask Question</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        



        <div id="content" class="snippet-hidden">
            

<div itemscope="" itemtype="http://schema.org/Question">
    <link itemprop="image" href="http://cdn.sstatic.net/Sites/codereview/img/apple-touch-icon.png?v=0a72875519a4">


    <div id="herobox">
        <div id="hero-content">
                <div id="close"><a title="click to minimize">_</a></div>
            <div id="blurb">
                Code Review Stack Exchange is a question and answer site for peer programmer code reviews. Join them; it only takes a minute:
                <br>
                <br>
                <a href="http://codereview.stackexchange.com/users/signup?ssrc=hero&amp;returnurl=http%3a%2f%2fcodereview.stackexchange.com%2fquestions%2f124177%2fthread-safe-rest-api" id="tell-me-more" class="button">Join</a>
            </div>
            <div id="desc">
                <b>Here's how it works:</b>
                <ol id="hiw">
                    <li id="q">Anybody can ask a question
                    </li>
                    <li id="an">Anybody can answer
                    </li>
                    <li id="b">The best answers are voted up and rise to the top
                    </li>
                </ol>
            </div>
            <div style="clear: both"></div>
        </div>
    </div>
<script>
    StackExchange.ready(function () {

        var location = 0;
        if ($("body").hasClass("questions-page")) {
            location = 1;;
        } else if ($("body").hasClass("question-page")) {
            location = 1;;
        } else if ($("body").hasClass("faq-page")) {
            location = 5;;
        } else if ($("body").hasClass("home-page")) {
            location = 3;;
        }

        $('#tell-me-more').click(function () {
            StackExchange.using("gps", function () {
                StackExchange.gps.track("hero.action", { hero_action_type: 'cta', location: location }, true);
            });
        });
        $('#herobox #close').click(function () {
            StackExchange.using("gps", function () {
                StackExchange.gps.track("hero.action", { hero_action_type: "minimize", location: location }, true);
            });
            $.cookie("hero", "mini", { path: "/", expires: 365 });
            $.ajax({
                url: "/hero-mini",
                success: function (data) {
                    $("#herobox").fadeOut("fast", function () {
                        $("#herobox").replaceWith(data);
                        $("#herobox-mini").fadeIn("fast");
                    });
                }
            });
            return false;
        });
    });

</script>			<div id="question-header">
                <h1 itemprop="name"><a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api" class="question-hyperlink">Thread safe REST API</a></h1>
		</div>
			<div id="mainbar">

			

<div class="question" data-questionid="124177" id="question">

        <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input type="hidden" name="_id_" value="124177">
        <a class="vote-up-off" title="This question shows research effort; it is useful and clear">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">1</span>
        <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful">down vote</a>

        <a class="star-off" href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#">favorite</a>
        <div class="favoritecount"><b>1</b></div>


</div>

            </td>
            
<td class="postcell">
<div>
    <div class="post-text" itemprop="text">

<p>My assignment was to develop a REST service that will provide Airport information. This service is assumed to be used by multiple users, therefore data consistency (thread safety) and responding fast are the main concerns. Following you can see implementation details. </p>

<p>AirportData is the core data object of this service.</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="pln">    </span><span class="com">/**
      * Represents a single airport
      */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">/**
     * Constants for data validation
     */</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> IATA_CODE_LENGTH </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> ICAO_CODE_LENGTH </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> MINIMUM_LATITUDE </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">90.0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> MAXIMUM_LATITUDE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">90.0</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> MINIMUM_longITUDE </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">180.0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> MAXIMUM_longITUDE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">180.0</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MAX_SIGNIFICANT_DIGITS </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Name of the airport */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Main city served by airport. May be spelled differently from name. */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> city</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Country or territory where airport is located. */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> country</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** the three letter IATA code */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** 4-letter ICAO code */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> icao</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** latitude value in degrees */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> latitude</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** longitude value in degrees */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> longitude</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** altitude value in feets */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> altitude</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Hours offset from UTC. */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> timezone</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Day light saving time of airport */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> DST zone </span><span class="pun">=</span><span class="pln"> DST</span><span class="pun">.</span><span class="pln">U</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * Private constructor to prevent unwanted instantiation
     * Use Builder instead.
     * @param Airport data builder
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pun">(</span><span class="typ">Builder</span><span class="pln"> builder</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        name </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln">
        city </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">city</span><span class="pun">;</span><span class="pln">
        country </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">country</span><span class="pun">;</span><span class="pln">
        iata </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">iata</span><span class="pun">;</span><span class="pln">
        icao </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">icao</span><span class="pun">;</span><span class="pln">
        latitude </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">latitude</span><span class="pun">;</span><span class="pln">
        longitude </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">longitude</span><span class="pun">;</span><span class="pln">
        altitude </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">altitude</span><span class="pun">;</span><span class="pln">
        timezone </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">timezone</span><span class="pun">;</span><span class="pln">
        zone </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">zone</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getIata</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> iata</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> getLatitude</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> latitude</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> getLongitude</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> longitude</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getCity</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> city</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getCountry</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> country</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getIcao</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> icao</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> getAltitude</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> altitude</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> getTimezone</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> timezone</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> DST getZone</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> zone</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">ReflectionToStringBuilder</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ToStringStyle</span><span class="pun">.</span><span class="pln">NO_CLASS_NAME_STYLE</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Two airports are identical if their IATA codes are the same
     */</span><span class="pln">
    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> equals</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> other</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(!(</span><span class="pln">other </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pun">))</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Boolean</span><span class="pun">.</span><span class="pln">FALSE</span><span class="pun">;</span><span class="pln">
        </span><span class="typ">AirportData</span><span class="pln"> otherAirport </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">AirportData</span><span class="pun">)</span><span class="pln"> other</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">EqualsBuilder</span><span class="pun">().</span><span class="pln">append</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">,</span><span class="pln"> otherAirport</span><span class="pun">.</span><span class="pln">getIata</span><span class="pun">()).</span><span class="pln">isEquals</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Hash code is calculated only using IATA code of airport
     */</span><span class="pln">
    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> hashCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashCodeBuilder</span><span class="pun">().</span><span class="pln">append</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">).</span><span class="pln">toHashCode</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Builder to create airport data instances.
     * @author emiralp
     *
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> city</span><span class="pun">;</span><span class="pln">        
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> country</span><span class="pun">;</span><span class="pln">             
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">;</span><span class="pln">        
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> icao</span><span class="pun">;</span><span class="pln">        
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> latitude</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> longitude</span><span class="pun">;</span><span class="pln">        
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> altitude</span><span class="pun">;</span><span class="pln">        
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> timezone</span><span class="pun">;</span><span class="pln">        
        </span><span class="kwd">private</span><span class="pln"> DST zone</span><span class="pun">;</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withName</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withCity</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> city</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">city </span><span class="pun">=</span><span class="pln"> city</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withCountry</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> country</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">country </span><span class="pun">=</span><span class="pln"> country</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withIATA</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">.</span><span class="pln">trim</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> iata</span><span class="pun">.</span><span class="pln">trim</span><span class="pun">().</span><span class="pln">length</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> IATA_CODE_LENGTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">iata </span><span class="pun">=</span><span class="pln"> iata</span><span class="pun">;</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">

            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withICAO</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> icao</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">icao</span><span class="pun">.</span><span class="pln">trim</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> icao</span><span class="pun">.</span><span class="pln">trim</span><span class="pun">().</span><span class="pln">length</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> ICAO_CODE_LENGTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">icao </span><span class="pun">=</span><span class="pln"> icao</span><span class="pun">;</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">

            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">icao</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withLatitude</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> latitude</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">latitude </span><span class="pun">&gt;=</span><span class="pln"> MINIMUM_LATITUDE </span><span class="pun">&amp;&amp;</span><span class="pln"> latitude </span><span class="pun">&lt;=</span><span class="pln"> MAXIMUM_LATITUDE </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="typ">WeatherUtil</span><span class="pun">.</span><span class="pln">getSignificantDigitCount</span><span class="pun">(</span><span class="pln">latitude</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> MAX_SIGNIFICANT_DIGITS</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">latitude </span><span class="pun">=</span><span class="pln"> latitude</span><span class="pun">;</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">

            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">latitude</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withLongitude</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> longitude</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">longitude </span><span class="pun">&gt;=</span><span class="pln"> MINIMUM_longITUDE </span><span class="pun">&amp;&amp;</span><span class="pln"> longitude </span><span class="pun">&lt;=</span><span class="pln"> MAXIMUM_longITUDE </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="typ">WeatherUtil</span><span class="pun">.</span><span class="pln">getSignificantDigitCount</span><span class="pun">(</span><span class="pln">longitude</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> MAX_SIGNIFICANT_DIGITS</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">longitude </span><span class="pun">=</span><span class="pln"> longitude</span><span class="pun">;</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
            </span><span class="pun">}</span><span class="pln"> 

            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">longitude</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withAltitude</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> altitude</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">altitude </span><span class="pun">=</span><span class="pln"> altitude</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withTimezone</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> timezone</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">timezone </span><span class="pun">=</span><span class="pln"> timezone</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withDSTZone</span><span class="pun">(</span><span class="pln">DST zone</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">zone </span><span class="pun">=</span><span class="pln"> zone</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pln"> build</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>Atmospheric Information of a airport. An airport can have only one atmospheric information.</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="com">/**
 * encapsulates sensor information for a particular location
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">/**
     * Valid Ranges for Atmospheric Data.
     */</span><span class="pln">
    </span><span class="com">// Temperature ranges</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MIN_TEMP </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">50</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MAX_TEMP </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// Humidity ranges</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MIN_HUMIDITY </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MAX_HUMIDITY </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// Precipitation ranges</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MIN_PREC </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MAX_PREC </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// Pressure ranges</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MIN_PRESSURE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">650</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MAX_PRESSURE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">800</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// CloudCover ranges</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MIN_COVER </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MAX_COVER </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** temperature in degrees celsius */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> temperature</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** wind speed in km/h */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> wind</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** humidity in percent */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> humidity</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** precipitation in cm */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> precipitation</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** pressure in mmHg */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> pressure</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** cloud cover percent from 0 - 100 (integer) */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> cloudCover</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** the last time this data was updated, in milliseconds since UTC epoch */</span><span class="pln">
    </span><span class="com">/** this field is not considered in equals() and hashCode() methods since it's just a label */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> lastUpdateTime</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">(</span><span class="typ">Builder</span><span class="pln"> builder</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">temperature </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">temperature</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">wind </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">wind</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">humidity </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">humidity</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">precipitation </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">precipitation</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">pressure </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">pressure</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">cloudCover </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">cloudCover</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> getTemperature</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> temperature</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setTemperature</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> temperature</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">temperature</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> MIN_TEMP </span><span class="pun">&amp;&amp;</span><span class="pln"> temperature</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> MAX_TEMP</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">temperature </span><span class="pun">=</span><span class="pln"> temperature</span><span class="pun">;</span><span class="pln">
            setLastUpdateTime</span><span class="pun">();</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">temperature</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> getWind</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> wind</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setWind</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> wind</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">wind</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">wind </span><span class="pun">=</span><span class="pln"> wind</span><span class="pun">;</span><span class="pln">
            setLastUpdateTime</span><span class="pun">();</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">wind</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> getHumidity</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> humidity</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setHumidity</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> humidity</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">humidity</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> MIN_HUMIDITY </span><span class="pun">&amp;&amp;</span><span class="pln"> humidity</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> MAX_HUMIDITY</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">humidity </span><span class="pun">=</span><span class="pln"> humidity</span><span class="pun">;</span><span class="pln">
            setLastUpdateTime</span><span class="pun">();</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">humidity</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> getPrecipitation</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> precipitation</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setPrecipitation</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> precipitation</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">precipitation</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> MIN_PREC </span><span class="pun">&amp;&amp;</span><span class="pln"> precipitation</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> MAX_PREC</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">precipitation </span><span class="pun">=</span><span class="pln"> precipitation</span><span class="pun">;</span><span class="pln">
            setLastUpdateTime</span><span class="pun">();</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">precipitation</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> getPressure</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> pressure</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setPressure</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> pressure</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">pressure</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> MIN_PRESSURE </span><span class="pun">&amp;&amp;</span><span class="pln"> pressure</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> MAX_PRESSURE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">pressure </span><span class="pun">=</span><span class="pln"> pressure</span><span class="pun">;</span><span class="pln">
            setLastUpdateTime</span><span class="pun">();</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">pressure</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> getCloudCover</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> cloudCover</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setCloudCover</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> cloudCover</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">cloudCover</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> MIN_COVER </span><span class="pun">&amp;&amp;</span><span class="pln"> cloudCover</span><span class="pun">.</span><span class="pln">getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> MAX_COVER</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">cloudCover </span><span class="pun">=</span><span class="pln"> cloudCover</span><span class="pun">;</span><span class="pln">
            setLastUpdateTime</span><span class="pun">();</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">cloudCover</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> getLastUpdateTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastUpdateTime</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setLastUpdateTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastUpdateTime </span><span class="pun">=</span><span class="pln"> </span><span class="typ">System</span><span class="pun">.</span><span class="pln">currentTimeMillis</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">ReflectionToStringBuilder</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ToStringStyle</span><span class="pun">.</span><span class="pln">NO_CLASS_NAME_STYLE</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> equals</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> other</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!(</span><span class="pln">other </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">))</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Boolean</span><span class="pun">.</span><span class="pln">FALSE</span><span class="pun">;</span><span class="pln">

        </span><span class="typ">AtmosphericInformation</span><span class="pln"> atmInfo </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">AtmosphericInformation</span><span class="pun">)</span><span class="pln"> other</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">EqualsBuilder</span><span class="pun">().</span><span class="pln">append</span><span class="pun">(</span><span class="pln">temperature</span><span class="pun">,</span><span class="pln"> atmInfo</span><span class="pun">.</span><span class="pln">getTemperature</span><span class="pun">()).</span><span class="pln">append</span><span class="pun">(</span><span class="pln">wind</span><span class="pun">,</span><span class="pln"> atmInfo</span><span class="pun">.</span><span class="pln">getWind</span><span class="pun">())</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">humidity</span><span class="pun">,</span><span class="pln"> atmInfo</span><span class="pun">.</span><span class="pln">getHumidity</span><span class="pun">()).</span><span class="pln">append</span><span class="pun">(</span><span class="pln">precipitation</span><span class="pun">,</span><span class="pln"> atmInfo</span><span class="pun">.</span><span class="pln">precipitation</span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">pressure</span><span class="pun">,</span><span class="pln"> atmInfo</span><span class="pun">.</span><span class="pln">getPressure</span><span class="pun">()).</span><span class="pln">append</span><span class="pun">(</span><span class="pln">cloudCover</span><span class="pun">,</span><span class="pln"> atmInfo</span><span class="pun">.</span><span class="pln">getCloudCover</span><span class="pun">()).</span><span class="pln">isEquals</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> hashCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashCodeBuilder</span><span class="pun">().</span><span class="pln">append</span><span class="pun">(</span><span class="pln">temperature</span><span class="pun">).</span><span class="pln">append</span><span class="pun">(</span><span class="pln">wind</span><span class="pun">).</span><span class="pln">append</span><span class="pun">(</span><span class="pln">humidity</span><span class="pun">).</span><span class="pln">append</span><span class="pun">(</span><span class="pln">precipitation</span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">pressure</span><span class="pun">).</span><span class="pln">append</span><span class="pun">(</span><span class="pln">cloudCover</span><span class="pun">).</span><span class="pln">toHashCode</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> temperature</span><span class="pun">;</span><span class="pln">        
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> wind</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> humidity</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> precipitation</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> pressure</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> cloudCover</span><span class="pun">;</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withTemperature</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> temperature</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">temperature </span><span class="pun">=</span><span class="pln"> temperature</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withWind</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> wind</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">wind </span><span class="pun">=</span><span class="pln"> wind</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withHumidity</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> humidity</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">humidity </span><span class="pun">=</span><span class="pln"> humidity</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withPrecipitation</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> precipitation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">precipitation </span><span class="pun">=</span><span class="pln"> precipitation</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withPressure</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> pressure</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">pressure </span><span class="pun">=</span><span class="pln"> pressure</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withCloudCover</span><span class="pun">(</span><span class="typ">DataPoint</span><span class="pln"> cloudCover</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">cloudCover </span><span class="pun">=</span><span class="pln"> cloudCover</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pln"> build</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>Single atmospheric data. Think this class as the child of atmospheric information.</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="pln">    </span><span class="com">/**
 * A collected point, including some information about the range of collected values
 *
 * 
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     </span><span class="com">/** the mean of the observations */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> mean </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** 1st quartile -- useful as a lower bound */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> first </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** 2nd quartile -- median value */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> median </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** 3rd quartile value -- less noisy upper value */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> last </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** the total number of measurements */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Internal config flag to denote testing transient fields in equals and hashCode methods*/</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> TEST_TRANSIENTS </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pun">(</span><span class="typ">Builder</span><span class="pln"> builder</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">first </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">first</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">mean </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">mean</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">median </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">median</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">last </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">last</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">count </span><span class="pun">=</span><span class="pln"> builder</span><span class="pun">.</span><span class="pln">count</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> getMean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> mean</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setMean</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> mean</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> 
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">mean </span><span class="pun">=</span><span class="pln"> mean</span><span class="pun">;</span><span class="pln"> 
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getFirst</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> first</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setFirst</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> first</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">first </span><span class="pun">=</span><span class="pln"> first</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getMedian</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> median</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setMedian</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> median</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">median </span><span class="pun">=</span><span class="pln"> median</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getLast</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> last</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setLast</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> last</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">last </span><span class="pun">=</span><span class="pln"> last</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getCount</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> count</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setCount</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">count </span><span class="pun">=</span><span class="pln"> count</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">ReflectionToStringBuilder</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ToStringStyle</span><span class="pun">.</span><span class="pln">NO_CLASS_NAME_STYLE</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> equals</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> that</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">EqualsBuilder</span><span class="pun">.</span><span class="pln">reflectionEquals</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> that</span><span class="pun">,</span><span class="pln"> TEST_TRANSIENTS</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> hashCode</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">HashCodeBuilder</span><span class="pun">.</span><span class="pln">reflectionHashCode</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> TEST_TRANSIENTS</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> first</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> mean</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> median</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> last</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> count</span><span class="pun">;</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withFirst</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> first</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">first</span><span class="pun">=</span><span class="pln"> first</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withMean</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> mean</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">mean </span><span class="pun">=</span><span class="pln"> mean</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withMedian</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> median</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">median </span><span class="pun">=</span><span class="pln"> median</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withCount</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">count </span><span class="pun">=</span><span class="pln"> count</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Builder</span><span class="pln"> withLast</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> last</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">last </span><span class="pun">=</span><span class="pln"> last</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> build</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>Enumeration for data point type. This is useful when converting request data.</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="com">/**
 * The various types of data points we can collect.
 *
 * 
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">enum</span><span class="pln"> </span><span class="typ">DataPointType</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    WIND </span><span class="pun">(</span><span class="str">"Wind"</span><span class="pun">),</span><span class="pln">
    TEMPERATURE </span><span class="pun">(</span><span class="str">"Temperature"</span><span class="pun">),</span><span class="pln">
    HUMIDTY </span><span class="pun">(</span><span class="str">"Humidity"</span><span class="pun">),</span><span class="pln">
    PRESSURE </span><span class="pun">(</span><span class="str">"Pressure"</span><span class="pun">),</span><span class="pln">
    CLOUDCOVER </span><span class="pun">(</span><span class="str">"CloudCover"</span><span class="pun">),</span><span class="pln">
    PRECIPITATION </span><span class="pun">(</span><span class="str">"Precipitation"</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataPointType</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Gets corresponding enum from given name.
     * The comparison is case insensitive, therefore "wind" and "WIND" will retrieve same enum.
     * @param name of the enumeration. 
     * @return enum
     * @throws DataPointUnknownException if no such enum. 
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">DataPointType</span><span class="pln"> fromName</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">DataPointUnknownException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">for</span><span class="pun">(</span><span class="typ">DataPointType</span><span class="pln"> type </span><span class="pun">:</span><span class="pln"> values</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">type</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">equalsIgnoreCase</span><span class="pun">(</span><span class="pln">name</span><span class="pun">))</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> type</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DataPointUnknownException</span><span class="pun">(</span><span class="pln">name</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">   
</span><span class="pun">}</span></code></pre>

<p>Daylight saving time enumeration. This is to outline the list of values and to ease of access.</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="com">/**
 * Daylight saving time zones
 * 
 * 
 *
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">enum</span><span class="pln"> DST </span><span class="pun">{</span><span class="pln">
    E </span><span class="pun">(</span><span class="str">"Europe"</span><span class="pun">),</span><span class="pln">
    A </span><span class="pun">(</span><span class="str">"US/Canada"</span><span class="pun">),</span><span class="pln">
    S </span><span class="pun">(</span><span class="str">"South America"</span><span class="pun">),</span><span class="pln">
    O </span><span class="pun">(</span><span class="str">"Australia"</span><span class="pun">),</span><span class="pln">
    Z </span><span class="pun">(</span><span class="str">"New Zealand"</span><span class="pun">),</span><span class="pln">
    N </span><span class="pun">(</span><span class="str">"None"</span><span class="pun">),</span><span class="pln">
    U </span><span class="pun">(</span><span class="str">"Unknown"</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> DST</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Gets corresponding DST zone from given name.
     * The comparison is case insensitive, therefore "europe" and "EUROPE" will retrieve same enum.
     * @param name
     * @return corresponding enum or Unknown (DST.U)
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> DST fromName</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">for</span><span class="pun">(</span><span class="pln">DST zone </span><span class="pun">:</span><span class="pln"> values</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">zone</span><span class="pun">.</span><span class="pln">name</span><span class="pun">.</span><span class="pln">equalsIgnoreCase</span><span class="pun">(</span><span class="pln">name</span><span class="pun">))</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> zone</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> DST</span><span class="pun">.</span><span class="pln">U</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>The assignment requested to keep the data in-memory. This class have necessary collections (concurrent collections) to support.</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="com">/**
 * In-memory repository for Airport Weather Service APP. 
 * 
 *
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">InMemoryRepository</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Repository</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">/** Initial capacity to support */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DEFAULT_CAPACITY </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">;</span><span class="pln">


    </span><span class="com">/** airports and their atmospheric information, key corresponds with airportData 
     *
     * Since one airport can only have one AtmospherinInformation object
     * It is OK to combine them in a map.
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> airportMap</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * Internal performance counter to better understand most requested information
     * 
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtomicInteger</span><span class="pun">&gt;</span><span class="pln"> requestFrequency</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * Performance counter to measure radius 
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">Double</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtomicInteger</span><span class="pun">&gt;</span><span class="pln"> radiusFrequency</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Singleton instance */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Repository</span><span class="pln"> INSTANCE </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InMemoryRepository</span><span class="pun">();</span><span class="pln">

    </span><span class="com">/**
     * private constructor to prevent malicious instantiations.
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">InMemoryRepository</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      
        airportMap </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConcurrentHashMap</span><span class="pun">&lt;&gt;(</span><span class="pln">DEFAULT_CAPACITY</span><span class="pun">);</span><span class="pln">
        requestFrequency </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConcurrentHashMap</span><span class="pun">&lt;&gt;();</span><span class="pln">
        radiusFrequency </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConcurrentHashMap</span><span class="pun">&lt;&gt;();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Gets the singleton instance of this class
     * @return {@link InMemoryRepository} instance
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Repository</span><span class="pln"> getInstance</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> INSTANCE</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">   

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtomicInteger</span><span class="pun">&gt;</span><span class="pln"> getRequestFrequency</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> requestFrequency</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">Double</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtomicInteger</span><span class="pun">&gt;</span><span class="pln"> getRadiusFrequency</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> radiusFrequency</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> getAirports</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> airportMap</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>

<p>Service class for the application</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="pln">    </span><span class="com">/**
     * Weather service for Airports
     * This service class implements {@code Service}
     * 
     *
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WeatherService</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Service</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="com">/**
         * Initial counter value for request frequencies.
         * Counter starts from -1 since on every airport addition,
         * it will get initialized and incremented to 0.
         */</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> INITIAL_REQUEST_COUNTER </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/**
         * Initial counter value for radius frequencies. 
         * This counter starts from 0 since it is initialized
         * when first request for radius is made. after counter
         * is initialized it will be incremented to 1. 
         */</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> INITIAL_RADIUS_COUNTER </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/**
         * Minimum array size for radius frequency calculations.
         */</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> MINIMUM_SIZE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/** One day in milliseconds */</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DAY </span><span class="pun">=</span><span class="pln"> </span><span class="lit">86400000</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/** Denotes the airport itself */</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> CENTER </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/** Divisor for calculating radius fractions */</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MOD </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/** Signal to send to underlying JVM */</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> SHUTDOWN_SIGNAL </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/**
         * Reference to underlying data store.
         */</span><span class="pln">
        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Repository</span><span class="pln"> repository</span><span class="pun">;</span><span class="pln">

        </span><span class="com">/**
         * Protected constructor.
         * Only {@link ServiceFactory} classes should instantiate Service classes
         * 
         * @param repository to persist data updates
         */</span><span class="pln">
        </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">WeatherService</span><span class="pun">(</span><span class="typ">Repository</span><span class="pln"> repository</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">repository </span><span class="pun">=</span><span class="pln"> repository</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataPointType</span><span class="pln"> getDataPointType</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> pointType</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">DataPointUnknownException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">DataPointType</span><span class="pun">.</span><span class="pln">fromName</span><span class="pun">(</span><span class="pln">pointType</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> updateAtmosphericInformation</span><span class="pun">(</span><span class="typ">AtmosphericInformation</span><span class="pln"> ai</span><span class="pun">,</span><span class="pln"> </span><span class="typ">DataPointType</span><span class="pln"> type</span><span class="pun">,</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> dp</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">DataPointUnknownException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

            </span><span class="com">// Update one of the Data points using switch</span><span class="pln">
            </span><span class="com">// there is no default case since we are using all possible enumerations enumeration</span><span class="pln">
            </span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">type</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> WIND</span><span class="pun">:</span><span class="pln">
                ai</span><span class="pun">.</span><span class="pln">setWind</span><span class="pun">(</span><span class="pln">dp</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> TEMPERATURE</span><span class="pun">:</span><span class="pln">
                ai</span><span class="pun">.</span><span class="pln">setTemperature</span><span class="pun">(</span><span class="pln">dp</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> HUMIDTY</span><span class="pun">:</span><span class="pln">
                ai</span><span class="pun">.</span><span class="pln">setHumidity</span><span class="pun">(</span><span class="pln">dp</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> PRESSURE</span><span class="pun">:</span><span class="pln">
                ai</span><span class="pun">.</span><span class="pln">setPressure</span><span class="pun">(</span><span class="pln">dp</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> CLOUDCOVER</span><span class="pun">:</span><span class="pln">
                ai</span><span class="pun">.</span><span class="pln">setCloudCover</span><span class="pun">(</span><span class="pln">dp</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">case</span><span class="pln"> PRECIPITATION</span><span class="pun">:</span><span class="pln">
                ai</span><span class="pun">.</span><span class="pln">setPrecipitation</span><span class="pun">(</span><span class="pln">dp</span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">default</span><span class="pun">:</span><span class="pln">
                </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">type</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">     
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> updateRadiusFrequency</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> radius</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// if it is the first time radius is requested start the counter</span><span class="pln">
            repository</span><span class="pun">.</span><span class="pln">getRadiusFrequency</span><span class="pun">().</span><span class="pln">computeIfAbsent</span><span class="pun">(</span><span class="pln">radius</span><span class="pun">,</span><span class="pln"> key </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AtomicInteger</span><span class="pun">(</span><span class="pln">INITIAL_RADIUS_COUNTER</span><span class="pun">));</span><span class="pln">
            </span><span class="com">// increment counter</span><span class="pln">
            repository</span><span class="pun">.</span><span class="pln">getRadiusFrequency</span><span class="pun">().</span><span class="pln">get</span><span class="pun">(</span><span class="pln">radius</span><span class="pun">).</span><span class="pln">incrementAndGet</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> updateRequestFrequency</span><span class="pun">(</span><span class="typ">AirportData</span><span class="pln"> airport</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">//if it is the first time airport is requested start the counter</span><span class="pln">
            repository</span><span class="pun">.</span><span class="pln">getRequestFrequency</span><span class="pun">().</span><span class="pln">computeIfAbsent</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">,</span><span class="pln"> key </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AtomicInteger</span><span class="pun">(</span><span class="pln">INITIAL_REQUEST_COUNTER</span><span class="pun">));</span><span class="pln">
            </span><span class="com">// increment counter</span><span class="pln">
            repository</span><span class="pun">.</span><span class="pln">getRequestFrequency</span><span class="pun">().</span><span class="pln">get</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">).</span><span class="pln">incrementAndGet</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">};</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Entry</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> findAirportData</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iataCode</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// two airports are equal if they have the same IATA code</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getAirports</span><span class="pun">().</span><span class="pln">entrySet</span><span class="pun">().</span><span class="pln">stream</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln">entry </span><span class="pun">-&gt;</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">().</span><span class="pln">getIata</span><span class="pun">().</span><span class="pln">equalsIgnoreCase</span><span class="pun">(</span><span class="pln">iataCode</span><span class="pun">))</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">findFirst</span><span class="pun">().</span><span class="pln">orElseThrow</span><span class="pun">(()</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pun">(</span><span class="pln">iataCode</span><span class="pun">));</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> getDatasize</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// At least one atmospheric info should be added in a day</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getAirports</span><span class="pun">().</span><span class="pln">values</span><span class="pun">().</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">filter</span><span class="pun">(</span><span class="pln">
                    info </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">!</span><span class="typ">WeatherUtil</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">(</span><span class="pln">info</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">info</span><span class="pun">.</span><span class="pln">getLastUpdateTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="typ">System</span><span class="pun">.</span><span class="pln">currentTimeMillis</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> DAY</span><span class="pun">)))</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">count</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Double</span><span class="pun">&gt;</span><span class="pln"> calculateRequestFrequencies</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// first calculate how many airports do have counter</span><span class="pln">
            </span><span class="com">// actually this is also the number of known airports in the system</span><span class="pln">
            </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> requestCount </span><span class="pun">=</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getRequestFrequency</span><span class="pun">().</span><span class="pln">size</span><span class="pun">();</span><span class="pln">

            </span><span class="com">// calculate fraction of requests</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getRequestFrequency</span><span class="pun">().</span><span class="pln">entrySet</span><span class="pun">().</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">collect</span><span class="pun">(</span><span class="pln">
                    </span><span class="typ">Collectors</span><span class="pun">.</span><span class="pln">toMap</span><span class="pun">(</span><span class="pln">e </span><span class="pun">-&gt;</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">().</span><span class="pln">getIata</span><span class="pun">(),</span><span class="pln"> e </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="typ">Double</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">().</span><span class="pln">get</span><span class="pun">())</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> requestCount</span><span class="pun">));</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"> calculateRadiusFrequencies</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// Get the integer value of highest radius queried</span><span class="pln">
            </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getRadiusFrequency</span><span class="pun">().</span><span class="pln">keySet</span><span class="pun">().</span><span class="pln">stream</span><span class="pun">()</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">max</span><span class="pun">(</span><span class="typ">Double</span><span class="pun">::</span><span class="pln">compare</span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">orElse</span><span class="pun">(</span><span class="pln">MINIMUM_SIZE</span><span class="pun">).</span><span class="pln">intValue</span><span class="pun">();</span><span class="pln">
            </span><span class="com">// Make array size atomic for thread safety</span><span class="pln">
            </span><span class="typ">AtomicInteger</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AtomicInteger</span><span class="pun">(</span><span class="pln">m</span><span class="pun">);</span><span class="pln">

            </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> hist </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[</span><span class="pln">size</span><span class="pun">.</span><span class="pln">incrementAndGet</span><span class="pun">()];</span><span class="pln">
            </span><span class="com">// Do some unclear logic..</span><span class="pln">
            repository</span><span class="pun">.</span><span class="pln">getRadiusFrequency</span><span class="pun">().</span><span class="pln">entrySet</span><span class="pun">().</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">forEach</span><span class="pun">(</span><span class="pln">entry </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">().</span><span class="pln">intValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> MOD</span><span class="pun">;</span><span class="pln">
                hist</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">().</span><span class="pln">intValue</span><span class="pun">();</span><span class="pln">
            </span><span class="pun">});</span><span class="pln">

            </span><span class="kwd">return</span><span class="pln"> hist</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> getAtmosphericInformation</span><span class="pun">(</span><span class="typ">Entry</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> airportEntry</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> radius</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> atmosphericData </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span><span class="pln">

            </span><span class="com">// If only weather of given airport is requested</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">radius </span><span class="pun">==</span><span class="pln"> CENTER</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">if</span><span class="pun">(!</span><span class="typ">WeatherUtil</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">(</span><span class="pln">airportEntry</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">()))</span><span class="pln">               
                    atmosphericData</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">airportEntry</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">());</span><span class="pln">

            </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="com">// current airport and nearby airports weather is requested</span><span class="pln">
                atmosphericData </span><span class="pun">=</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getAirports</span><span class="pun">().</span><span class="pln">entrySet</span><span class="pun">().</span><span class="pln">stream</span><span class="pun">()</span><span class="pln">
                        </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln">entry </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="typ">WeatherUtil</span><span class="pun">.</span><span class="pln">calculateDistance</span><span class="pun">(</span><span class="pln">airportEntry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">(),</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">())</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> radius
                                </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="typ">WeatherUtil</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">(</span><span class="pln">entry</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">()))</span><span class="pln">
                        </span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="pln">entry </span><span class="pun">-&gt;</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">()).</span><span class="pln">collect</span><span class="pun">(</span><span class="typ">Collectors</span><span class="pun">.</span><span class="pln">toList</span><span class="pun">());</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">

            </span><span class="kwd">return</span><span class="pln"> atmosphericData</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> getIATACodes</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getAirports</span><span class="pun">().</span><span class="pln">keySet</span><span class="pun">().</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">map</span><span class="pun">(</span><span class="pln">key </span><span class="pun">-&gt;</span><span class="pln"> key</span><span class="pun">.</span><span class="pln">getIata</span><span class="pun">()).</span><span class="pln">collect</span><span class="pun">(</span><span class="typ">Collectors</span><span class="pun">.</span><span class="pln">toSet</span><span class="pun">());</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> deleteAirport</span><span class="pun">(</span><span class="typ">AirportData</span><span class="pln"> airport</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">     
            </span><span class="com">// Remove compares objects by invoking equals() method.</span><span class="pln">
            </span><span class="com">// AirportData compares objects by looking at their IATA codes.</span><span class="pln">
            </span><span class="com">// hence AirportData above may have a match in map.</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">repository</span><span class="pun">.</span><span class="pln">getAirports</span><span class="pun">().</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> 
                </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">.</span><span class="pln">getIata</span><span class="pun">());</span><span class="pln">                              
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> removeRequestFrequency</span><span class="pun">(</span><span class="typ">AirportData</span><span class="pln"> airport</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">AtomicInteger</span><span class="pln"> counter </span><span class="pun">=</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getRequestFrequency</span><span class="pun">().</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">counter </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln">
                </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">.</span><span class="pln">getIata</span><span class="pun">());</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> removeRadiusFrequency</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> radius</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">AtomicInteger</span><span class="pln"> counter </span><span class="pun">=</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">getRadiusFrequency</span><span class="pun">().</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">radius</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">counter </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln">
                </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">(</span><span class="pln">radius</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pln"> createAirport</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> latitude</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> longitude</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// Start to build airport data object with IATA code.</span><span class="pln">
            </span><span class="typ">Builder</span><span class="pln"> airportBuilder </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">().</span><span class="pln">withIATA</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">);</span><span class="pln">

            </span><span class="com">// latitude and longitude values are optional       </span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="typ">StringUtils</span><span class="pun">.</span><span class="pln">isNotBlank</span><span class="pun">(</span><span class="pln">latitude</span><span class="pun">))</span><span class="pln">
                airportBuilder </span><span class="pun">=</span><span class="pln"> airportBuilder</span><span class="pun">.</span><span class="pln">withLatitude</span><span class="pun">(</span><span class="typ">Double</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">latitude</span><span class="pun">));</span><span class="pln">

            </span><span class="kwd">if</span><span class="pun">(</span><span class="typ">StringUtils</span><span class="pun">.</span><span class="pln">isNotBlank</span><span class="pun">(</span><span class="pln">longitude</span><span class="pun">))</span><span class="pln">
                airportBuilder </span><span class="pun">=</span><span class="pln"> airportBuilder</span><span class="pun">.</span><span class="pln">withLongitude</span><span class="pun">(</span><span class="typ">Double</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">longitude</span><span class="pun">));</span><span class="pln">

            </span><span class="kwd">return</span><span class="pln"> airportBuilder</span><span class="pun">.</span><span class="pln">build</span><span class="pun">();</span><span class="pln">      
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pln"> createAtmoshpericInformation </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">().</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> addAirport</span><span class="pun">(</span><span class="typ">AirportData</span><span class="pln"> airport</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pln"> atmosphericInformation</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">AirportExistsException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      
            </span><span class="com">// If airport is already there (!= null) throw exception</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">repository</span><span class="pun">.</span><span class="pln">getAirports</span><span class="pun">().</span><span class="pln">putIfAbsent</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">,</span><span class="pln"> atmosphericInformation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln">
                </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AirportExistsException</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">.</span><span class="pln">getIata</span><span class="pun">());</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">       
            repository</span><span class="pun">.</span><span class="pln">getAirports</span><span class="pun">().</span><span class="pln">clear</span><span class="pun">();</span><span class="pln">       
            repository</span><span class="pun">.</span><span class="pln">getRequestFrequency</span><span class="pun">().</span><span class="pln">clear</span><span class="pun">();</span><span class="pln">
            repository</span><span class="pun">.</span><span class="pln">getRadiusFrequency</span><span class="pun">().</span><span class="pln">clear</span><span class="pun">();</span><span class="pln">                    
        </span><span class="pun">}</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> exit</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">System</span><span class="pun">.</span><span class="pln">exit</span><span class="pun">(</span><span class="pln">SHUTDOWN_SIGNAL</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span></code></pre>

<p>Facade of the application. This ensures abstraction of endpoints from underlying service class.    </p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="com">/**
 * Facade class for weather service.
 * 
 * 
 *
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WeatherServiceFacade</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ServiceFacade</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">/**
     * Reference to repository layer.
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Repository</span><span class="pln"> repository</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * Reference to service layer.
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Service</span><span class="pln"> service</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     *  shared gson json to object factory   
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Gson</span><span class="pln"> gson </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Gson</span><span class="pun">();</span><span class="pln">

    </span><span class="com">/** Keys to describe each statistics */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> STATS_SIZE_KEY </span><span class="pun">=</span><span class="pln"> </span><span class="str">"datasize"</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> STATS_IATA_FREQ_KEY </span><span class="pun">=</span><span class="pln"> </span><span class="str">"iataFreq"</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> STATS_RAD_FREQ_KEY </span><span class="pun">=</span><span class="pln"> </span><span class="str">"radiusFreq"</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * Constructor that takes {@link RepositoryType} as parameter.
     * Default repository is IN-MEMORY repository.
     * 
     * {@link RepositoryType} is implemented for future improvements.
     * For now, AWS supports only In-Memory repository and therefore it
     * is not required to process parameter (inside switch or if blocks, etc.)
     * 
     * @param type of repository that this facade is providing access to. 
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">WeatherServiceFacade</span><span class="pun">(</span><span class="typ">RepositoryType</span><span class="pln"> type</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      
        </span><span class="com">// setup facade. </span><span class="pln">
        repository </span><span class="pun">=</span><span class="pln"> </span><span class="typ">InMemoryRepository</span><span class="pun">.</span><span class="pln">getInstance</span><span class="pun">();</span><span class="pln">
        service </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WeatherService</span><span class="pun">(</span><span class="pln">repository</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getStatistics</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">&gt;</span><span class="pln"> stats </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashMap</span><span class="pun">&lt;&gt;();</span><span class="pln">

        </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> datasize </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">getDatasize</span><span class="pun">();</span><span class="pln">        
        stats</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln">STATS_SIZE_KEY</span><span class="pun">,</span><span class="pln"> datasize</span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Double</span><span class="pun">&gt;</span><span class="pln"> frequencies </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">calculateRequestFrequencies</span><span class="pun">();</span><span class="pln">       
        stats</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln">STATS_IATA_FREQ_KEY</span><span class="pun">,</span><span class="pln"> frequencies</span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"> hist </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">calculateRadiusFrequencies</span><span class="pun">();</span><span class="pln">        
        stats</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln">STATS_RAD_FREQ_KEY</span><span class="pun">,</span><span class="pln"> hist</span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> gson</span><span class="pun">.</span><span class="pln">toJson</span><span class="pun">(</span><span class="pln">stats</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> getAirportWeatherData</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> radius</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">NumberFormatException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// get airport entry</span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Entry</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> airportEntry </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">findAirportData</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">);</span><span class="pln">
        </span><span class="com">// radius : convert String to double</span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WeatherUtil</span><span class="pun">.</span><span class="pln">extractRadius</span><span class="pun">(</span><span class="pln">radius</span><span class="pun">);</span><span class="pln">

        </span><span class="com">// update counters</span><span class="pln">
        service</span><span class="pun">.</span><span class="pln">updateRequestFrequency</span><span class="pun">(</span><span class="pln">airportEntry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">());</span><span class="pln">        
        service</span><span class="pun">.</span><span class="pln">updateRadiusFrequency</span><span class="pun">(</span><span class="pln">r</span><span class="pun">);</span><span class="pln"> 

        </span><span class="kwd">return</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">getAtmosphericInformation</span><span class="pun">(</span><span class="pln">airportEntry</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> updateWeather</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> pointType</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> datapointJson</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">JsonParseException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">DataPointUnknownException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      
        </span><span class="com">// get airport entry </span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Entry</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> airportEntry </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">findAirportData</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">);</span><span class="pln">      

        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">DataPointType</span><span class="pln"> type </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">getDataPointType</span><span class="pun">(</span><span class="pln">pointType</span><span class="pun">);</span><span class="pln"> 
        </span><span class="com">// convert JSON String to actual object.</span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pln"> dataPoint </span><span class="pun">=</span><span class="pln"> gson</span><span class="pun">.</span><span class="pln">fromJson</span><span class="pun">(</span><span class="pln">datapointJson</span><span class="pun">,</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">

        </span><span class="com">// update airport's weather info</span><span class="pln">
        service</span><span class="pun">.</span><span class="pln">updateAtmosphericInformation</span><span class="pun">(</span><span class="pln">airportEntry</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">(),</span><span class="pln"> type</span><span class="pun">,</span><span class="pln"> dataPoint</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> getIATACodes</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">getIATACodes</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pln"> getAirport</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Entry</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pun">&gt;</span><span class="pln"> airportEntry </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">findAirportData</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">);</span><span class="pln">          

        </span><span class="com">// we have a match, update request counter</span><span class="pln">
        service</span><span class="pun">.</span><span class="pln">updateRequestFrequency</span><span class="pun">(</span><span class="pln">airportEntry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">());</span><span class="pln">  

        </span><span class="kwd">return</span><span class="pln"> airportEntry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> addAirport</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> latitude</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> longitude</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">PropertyMissingException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">NumberFormatException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AirportExistsException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="com">// Check if latitude and longitude are set</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="typ">StringUtils</span><span class="pun">.</span><span class="pln">isAnyBlank</span><span class="pun">(</span><span class="pln">latitude</span><span class="pun">,</span><span class="pln"> longitude</span><span class="pun">))</span><span class="pln">
            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PropertyMissingException</span><span class="pun">();</span><span class="pln">

        </span><span class="com">// build new airport object from input</span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pln"> newAirport </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">createAirport</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">,</span><span class="pln"> latitude</span><span class="pun">,</span><span class="pln"> longitude</span><span class="pun">);</span><span class="pln">
        </span><span class="com">// Create a empty atmosphericInfo object to bind it with airport.</span><span class="pln">
        </span><span class="com">// Since an airport could have only one atmosphericInfo object</span><span class="pln">
        </span><span class="com">// It is all right to do this.</span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pln"> atmosphericInformation </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">createAtmoshpericInformation</span><span class="pun">();</span><span class="pln">
        </span><span class="com">// persist the new airport</span><span class="pln">
        service</span><span class="pun">.</span><span class="pln">addAirport</span><span class="pun">(</span><span class="pln">newAirport</span><span class="pun">,</span><span class="pln"> atmosphericInformation</span><span class="pun">);</span><span class="pln"> 
        </span><span class="com">// initialize counter</span><span class="pln">
        service</span><span class="pun">.</span><span class="pln">updateRequestFrequency</span><span class="pun">(</span><span class="pln">newAirport</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> addAirports</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> airportsJson</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">JsonParseException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">&gt;</span><span class="pln"> airports </span><span class="pun">=</span><span class="pln"> gson</span><span class="pun">.</span><span class="pln">fromJson</span><span class="pun">(</span><span class="pln">airportsJson</span><span class="pun">,</span><span class="pln"> </span><span class="typ">WeatherUtil</span><span class="pun">.</span><span class="pln">getAirportListType</span><span class="pun">());</span><span class="pln">       

        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> failures </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span><span class="pln">

        </span><span class="com">// iterate over the list and add each airport</span><span class="pln">
        airports</span><span class="pun">.</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">forEach</span><span class="pun">(</span><span class="pln">airport </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="com">// Create a empty atmosphericInfo object to bind it with airport.</span><span class="pln">
                </span><span class="com">// Since an airport could have only one atmosphericInfo object</span><span class="pln">
                </span><span class="com">// It is all right to do this.</span><span class="pln">
                </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">AtmosphericInformation</span><span class="pln"> atmosphericInformation </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">createAtmoshpericInformation</span><span class="pun">();</span><span class="pln">
                service</span><span class="pun">.</span><span class="pln">addAirport</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">,</span><span class="pln"> atmosphericInformation</span><span class="pun">);</span><span class="pln">
                </span><span class="com">// initialize counter</span><span class="pln">
                service</span><span class="pun">.</span><span class="pln">updateRequestFrequency</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">AirportExistsException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="com">// Since this is batch processing, we will catch the error and </span><span class="pln">
                </span><span class="com">// log it to response.</span><span class="pln">
                failures</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">());</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">});</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> failures</span><span class="pun">;</span><span class="pln">    
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> deleteAirport</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AirportNotFoundException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">AirportData</span><span class="pln"> airport </span><span class="pun">=</span><span class="pln"> service</span><span class="pun">.</span><span class="pln">createAirport</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span><span class="pln">
        service</span><span class="pun">.</span><span class="pln">deleteAirport</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">);</span><span class="pln"> 
        service</span><span class="pun">.</span><span class="pln">removeRequestFrequency</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> exit</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        service</span><span class="pun">.</span><span class="pln">exit</span><span class="pun">();</span><span class="pln">     
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        service</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">();</span><span class="pln">        
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>Utility class of application. This class contains static methods that can be accessed directly from anywhere of application.</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="com">/**
 * Utility class for Airport Weather Service App.
 * 
 *
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WeatherUtil</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">/** earth radius in KM */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> RADIUS </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6372.8</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Constants of Haversine algorithm */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> POWER </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DIVISOR </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MULTIPLIER </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Type for List&lt;AirportData&gt; */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Type</span><span class="pln"> AIRPORT_LIST_TYPE </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TypeToken</span><span class="pun">&lt;</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">&gt;&gt;(){}.</span><span class="pln">getType</span><span class="pun">();</span><span class="pln">

    </span><span class="com">/** denotes the airport it self in radius */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> CENTER_RADIUS </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * Haversine distance between two airports.
     *
     * @param ad1 first airport
     * @param ad2 second airport
     * @return the distance between airports in KM (kilometers).
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> calculateDistance</span><span class="pun">(</span><span class="typ">AirportData</span><span class="pln"> ad1</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pln"> ad2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">double</span><span class="pln"> deltaLat </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">toRadians</span><span class="pun">(</span><span class="pln">ad2</span><span class="pun">.</span><span class="pln">getLatitude</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> ad1</span><span class="pun">.</span><span class="pln">getLatitude</span><span class="pun">());</span><span class="pln">
        </span><span class="kwd">double</span><span class="pln"> deltaLon </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">toRadians</span><span class="pun">(</span><span class="pln">ad2</span><span class="pun">.</span><span class="pln">getLongitude</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> ad1</span><span class="pun">.</span><span class="pln">getLongitude</span><span class="pun">());</span><span class="pln">
        </span><span class="kwd">double</span><span class="pln"> a </span><span class="pun">=</span><span class="pln">  </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">pow</span><span class="pun">(</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">deltaLat </span><span class="pun">/</span><span class="pln"> DIVISOR</span><span class="pun">),</span><span class="pln"> POWER</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">pow</span><span class="pun">(</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">sin</span><span class="pun">(</span><span class="pln">deltaLon </span><span class="pun">/</span><span class="pln"> DIVISOR</span><span class="pun">),</span><span class="pln"> POWER</span><span class="pun">)</span><span class="pln">
                </span><span class="pun">*</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">ad1</span><span class="pun">.</span><span class="pln">getLatitude</span><span class="pun">())</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">cos</span><span class="pun">(</span><span class="pln">ad2</span><span class="pun">.</span><span class="pln">getLatitude</span><span class="pun">());</span><span class="pln">
        </span><span class="kwd">double</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> MULTIPLIER </span><span class="pun">*</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">asin</span><span class="pun">(</span><span class="typ">Math</span><span class="pun">.</span><span class="pln">sqrt</span><span class="pun">(</span><span class="pln">a</span><span class="pun">));</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> RADIUS </span><span class="pun">*</span><span class="pln"> c</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Calculates number of significant digits for given double value
     * @param value
     * @return count of significant digits.
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getSignificantDigitCount</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">BigDecimal</span><span class="pln"> bd </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BigDecimal</span><span class="pun">(</span><span class="typ">String</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">value</span><span class="pun">));</span><span class="pln">
        </span><span class="typ">String</span><span class="pln"> plainVal </span><span class="pun">=</span><span class="pln"> bd</span><span class="pun">.</span><span class="pln">stripTrailingZeros</span><span class="pun">().</span><span class="pln">toPlainString</span><span class="pun">();</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> index </span><span class="pun">=</span><span class="pln"> plainVal</span><span class="pun">.</span><span class="pln">indexOf</span><span class="pun">(</span><span class="str">"."</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> plainVal</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> index </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Returns true if object is null or none of properties are set
     * @param info object to check
     * @return true if object is null or none of properties are set
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isEmpty</span><span class="pun">(</span><span class="typ">AtmosphericInformation</span><span class="pln"> info</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">info </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Boolean</span><span class="pun">.</span><span class="pln">TRUE</span><span class="pun">;</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">getCloudCover</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">getHumidity</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">getPressure</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln">
                </span><span class="pun">&amp;&amp;</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">getPrecipitation</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">getTemperature</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> info</span><span class="pun">.</span><span class="pln">getWind</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> extractRadius</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> radiusString</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">NumberFormatException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> radiusString </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> radiusString</span><span class="pun">.</span><span class="pln">trim</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> CENTER_RADIUS </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Double</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">radiusString</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Gets the specific genericized type.
     * Used for deserializing json data.
     * @return type
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Type</span><span class="pln"> getAirportListType</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> AIRPORT_LIST_TYPE</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>This is the special case of the requirement. It is assumed that a power user should be able to upload static data to the system directly.
This class loads a CSV file, parses it to airport data objects and sends them in bulk to REST endpoint.</p>

<pre class="lang-java prettyprint prettyprinted"><code><span class="com">/**
 * A simple airport loader which reads a file from disk and sends entries to the web service
 *
 * IMPORTANT NOTE: It is assumed that file's absolute path will be provided hence {@link ClassLoader} is not preferred.
 *                 Relative paths may not work.
 * 
 *
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AirportLoader</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Logger</span><span class="pln"> LOGGER </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Logger</span><span class="pun">.</span><span class="pln">getLogger</span><span class="pun">(</span><span class="typ">AirportLoader</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">());</span><span class="pln">

    </span><span class="com">/** number of arguments this program expects to operate */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> ARGUMENT_SIZE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** the index of file path in arguments array */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> PATH_INDEX </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** denotes empty file length */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> INVALID_FILE_SIZE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0L</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Separator for splitting String */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> CSV_SEPERATOR </span><span class="pun">=</span><span class="pln"> </span><span class="str">","</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Each CSV line is expected to have this much value */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> VALID_FORMAT_LENGTH </span><span class="pun">=</span><span class="pln"> </span><span class="lit">11</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** Constants to delete quotes from CSV file */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> QUOTE </span><span class="pun">=</span><span class="pln"> </span><span class="str">"\""</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> EMPTY_STRING </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** end point to supply updates */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">WeatherCollectorEndpoint</span><span class="pln"> endpoint </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RestWeatherCollectorEndpoint</span><span class="pun">();</span><span class="pln">

    </span><span class="com">/** shared gson json to object factory */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Gson</span><span class="pln"> gson </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Gson</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">AirportLoader</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Uploads airports to the server
     * @param airportDataStream the stream of airports
     * @throws IOException 
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> upload</span><span class="pun">(</span><span class="typ">InputStream</span><span class="pln"> airportDataStream</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">&gt;</span><span class="pln"> airports </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span><span class="pln">

        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">(</span><span class="typ">BufferedReader</span><span class="pln"> reader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedReader</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InputStreamReader</span><span class="pun">(</span><span class="pln">airportDataStream</span><span class="pun">)))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

            </span><span class="typ">String</span><span class="pln"> line </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">        
            </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">((</span><span class="pln">line </span><span class="pun">=</span><span class="pln"> reader</span><span class="pun">.</span><span class="pln">readLine</span><span class="pun">())</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

                </span><span class="com">// remove quotes from values.</span><span class="pln">
                line </span><span class="pun">=</span><span class="pln"> line</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="pln">QUOTE</span><span class="pun">,</span><span class="pln"> EMPTY_STRING</span><span class="pun">);</span><span class="pln">

                </span><span class="com">// split values to assign them</span><span class="pln">
                </span><span class="typ">String</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"> values </span><span class="pun">=</span><span class="pln"> line</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="pln">CSV_SEPERATOR</span><span class="pun">);</span><span class="pln">

                </span><span class="com">// We just care the first eleven fields.</span><span class="pln">
                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">values</span><span class="pun">.</span><span class="pln">length </span><span class="pun">&gt;=</span><span class="pln"> VALID_FORMAT_LENGTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

                    </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                        </span><span class="com">// Build the object</span><span class="pln">
                        </span><span class="typ">AirportData</span><span class="pln"> airport </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AirportData</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">().</span><span class="pln">withName</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]).</span><span class="pln">withCity</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span><span class="pln">
                                </span><span class="pun">.</span><span class="pln">withCountry</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]).</span><span class="pln">withIATA</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]).</span><span class="pln">withICAO</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">5</span><span class="pun">])</span><span class="pln">
                                </span><span class="pun">.</span><span class="pln">withLatitude</span><span class="pun">(</span><span class="typ">Double</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">6</span><span class="pun">])).</span><span class="pln">withLongitude</span><span class="pun">(</span><span class="typ">Double</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">7</span><span class="pun">]))</span><span class="pln">
                                </span><span class="pun">.</span><span class="pln">withAltitude</span><span class="pun">(</span><span class="typ">Long</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">8</span><span class="pun">])).</span><span class="pln">withTimezone</span><span class="pun">(</span><span class="typ">Double</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">9</span><span class="pun">]))</span><span class="pln">
                                </span><span class="pun">.</span><span class="pln">withDSTZone</span><span class="pun">(</span><span class="pln">DST</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln">values</span><span class="pun">[</span><span class="lit">10</span><span class="pun">])).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">

                        </span><span class="com">// Add it to list</span><span class="pln">
                        airports</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">);</span><span class="pln">
                    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NumberFormatException</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">InvalidValueException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                        LOGGER</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Level</span><span class="pun">.</span><span class="pln">SEVERE</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
                    </span><span class="pun">}</span><span class="pln"> 

                </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                    LOGGER</span><span class="pun">.</span><span class="pln">severe</span><span class="pun">(</span><span class="str">"CSV line has invalid value count :"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> values</span><span class="pun">.</span><span class="pln">length</span><span class="pun">);</span><span class="pln">
                </span><span class="pun">}</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln"> 

        sendAirports</span><span class="pun">(</span><span class="pln">airports</span><span class="pun">);</span><span class="pln">     
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Sends loaded airports to Server
     * @param airports
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> sendAirports</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">AirportData</span><span class="pun">&gt;</span><span class="pln"> airports</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">     
        </span><span class="typ">Response</span><span class="pln"> response </span><span class="pun">=</span><span class="pln"> endpoint</span><span class="pun">.</span><span class="pln">addAirports</span><span class="pun">(</span><span class="pln">gson</span><span class="pun">.</span><span class="pln">toJson</span><span class="pun">(</span><span class="pln">airports</span><span class="pun">));</span><span class="pln">
        </span><span class="com">// It is ok to suppress</span><span class="pln">
        </span><span class="lit">@SuppressWarnings</span><span class="pun">(</span><span class="str">"unchecked"</span><span class="pun">)</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> failures </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;)</span><span class="pln"> response</span><span class="pun">.</span><span class="pln">getEntity</span><span class="pun">();</span><span class="pln">

        LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">"Errors:"</span><span class="pun">);</span><span class="pln">
        failures</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">(</span><span class="pln">fail </span><span class="pun">-&gt;</span><span class="pln"> LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="pln">fail</span><span class="pun">));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> args</span><span class="pun">[])</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">args </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> args</span><span class="pun">.</span><span class="pln">length </span><span class="pun">&lt;</span><span class="pln"> ARGUMENT_SIZE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">severe</span><span class="pun">(</span><span class="str">"Missing argument!"</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="typ">File</span><span class="pln"> airportDataFile </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">args</span><span class="pun">[</span><span class="pln">PATH_INDEX</span><span class="pun">]);</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">airportDataFile</span><span class="pun">.</span><span class="pln">exists</span><span class="pun">()</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> airportDataFile</span><span class="pun">.</span><span class="pln">length</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> INVALID_FILE_SIZE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">severe</span><span class="pun">(</span><span class="pln">airportDataFile </span><span class="pun">+</span><span class="pln"> </span><span class="str">" is not a valid input"</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="typ">AirportLoader</span><span class="pln"> al </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AirportLoader</span><span class="pun">();</span><span class="pln">
        al</span><span class="pun">.</span><span class="pln">upload</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileInputStream</span><span class="pun">(</span><span class="pln">airportDataFile</span><span class="pun">));</span><span class="pln">

        </span><span class="typ">Response</span><span class="pln"> response </span><span class="pun">=</span><span class="pln"> endpoint</span><span class="pun">.</span><span class="pln">getAirports</span><span class="pun">();</span><span class="pln">

        </span><span class="com">//  It is ok to suppress</span><span class="pln">
        </span><span class="lit">@SuppressWarnings</span><span class="pun">(</span><span class="str">"unchecked"</span><span class="pun">)</span><span class="pln">
        </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> airports </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;)</span><span class="pln"> response</span><span class="pun">.</span><span class="pln">getEntity</span><span class="pun">();</span><span class="pln">
        LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">"Known airports after loading:"</span><span class="pun">);</span><span class="pln">
        airports</span><span class="pun">.</span><span class="pln">stream</span><span class="pun">().</span><span class="pln">forEach</span><span class="pun">(</span><span class="pln">airport </span><span class="pun">-&gt;</span><span class="pln"> LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="pln">airport</span><span class="pun">));</span><span class="pln">

    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">/**
 * A REST implementation of the WeatherCollector API. Accessible only to airport
 * weather collection sites via secure VPN.
 *
 * @author code test administrator
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RestWeatherCollectorEndpoint</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">WeatherCollectorEndpoint</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">/** logs errors */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Logger</span><span class="pln"> LOGGER </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Logger</span><span class="pun">.</span><span class="pln">getLogger</span><span class="pun">(</span><span class="typ">RestWeatherCollectorEndpoint</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">());</span><span class="pln">

    </span><span class="com">/** facade object to access service layer */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ServiceFacade</span><span class="pln"> facade</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * Constructor
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RestWeatherCollectorEndpoint</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        facade </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WeatherServiceFacade</span><span class="pun">(</span><span class="typ">RepositoryType</span><span class="pun">.</span><span class="pln">IN_MEMORY</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> ping</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">OK</span><span class="pun">).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> updateWeather</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iataCode</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> pointType</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> datapointJson</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            facade</span><span class="pun">.</span><span class="pln">updateWeather</span><span class="pun">(</span><span class="pln">iataCode</span><span class="pun">,</span><span class="pln"> pointType</span><span class="pun">,</span><span class="pln"> datapointJson</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">OK</span><span class="pun">).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">JsonParseException</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">WeatherException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Level</span><span class="pun">.</span><span class="pln">SEVERE</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">BAD_REQUEST</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> getAirports</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">OK</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">facade</span><span class="pun">.</span><span class="pln">getIATACodes</span><span class="pun">()).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> getAirport</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">           
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">OK</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">facade</span><span class="pun">.</span><span class="pln">getAirport</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">)).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">         
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WeatherException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Level</span><span class="pun">.</span><span class="pln">SEVERE</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">NOT_FOUND</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> addAirport</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> latString</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> longString</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">               
            facade</span><span class="pun">.</span><span class="pln">addAirport</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">,</span><span class="pln"> latString</span><span class="pun">,</span><span class="pln"> longString</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">CREATED</span><span class="pun">).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">            
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NumberFormatException</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">WeatherException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Level</span><span class="pun">.</span><span class="pln">SEVERE</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">BAD_REQUEST</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> deleteAirport</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            facade</span><span class="pun">.</span><span class="pln">deleteAirport</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">);</span><span class="pln">     
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">OK</span><span class="pun">).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">         
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WeatherException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Level</span><span class="pun">.</span><span class="pln">SEVERE</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">NOT_FOUND</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> exit</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">        
        facade</span><span class="pun">.</span><span class="pln">exit</span><span class="pun">();</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">noContent</span><span class="pun">().</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> addAirports</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> airportsJson</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">           
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">CREATED</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">facade</span><span class="pun">.</span><span class="pln">addAirports</span><span class="pun">(</span><span class="pln">airportsJson</span><span class="pun">)).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">           
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">JsonParseException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">BAD_REQUEST</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">/**
 * The Weather App REST endpoint allows clients to query, update and check health stats. Currently, all data is
 * held in memory. The end point deploys to a single container
 *
 * @author code test administrator
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RestWeatherQueryEndpoint</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">WeatherQueryEndpoint</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Logger</span><span class="pln"> LOGGER </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Logger</span><span class="pun">.</span><span class="pln">getLogger</span><span class="pun">(</span><span class="typ">RestWeatherQueryEndpoint</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">());</span><span class="pln">

    </span><span class="com">/** facade object to access service layer */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ServiceFacade</span><span class="pln"> facade</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * public constructor
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RestWeatherQueryEndpoint</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        facade </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WeatherServiceFacade</span><span class="pun">(</span><span class="typ">RepositoryType</span><span class="pun">.</span><span class="pln">IN_MEMORY</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> ping</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      
        </span><span class="kwd">return</span><span class="pln"> facade</span><span class="pun">.</span><span class="pln">getStatistics</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> weather</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> radiusString</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">OK</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">facade</span><span class="pun">.</span><span class="pln">getAirportWeatherData</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">,</span><span class="pln"> radiusString</span><span class="pun">)).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">            
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">NumberFormatException</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">WeatherException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Level</span><span class="pun">.</span><span class="pln">SEVERE</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Response</span><span class="pun">.</span><span class="pln">status</span><span class="pun">(</span><span class="typ">Response</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">.</span><span class="pln">BAD_REQUEST</span><span class="pun">).</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">/**
 * A reference implementation for the weather client. Consumers of the REST API can look at WeatherClient
 * to understand API semantics. This existing client populates the REST end point with dummy data useful for
 * testing.
 *
 * @author code test administrator
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WeatherClient</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Logger</span><span class="pln"> LOGGER </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Logger</span><span class="pun">.</span><span class="pln">getLogger</span><span class="pun">(</span><span class="typ">WeatherClient</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">());</span><span class="pln">

    </span><span class="com">/** end point for read queries */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">WebTarget</span><span class="pln"> query</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** end point to supply updates */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">WebTarget</span><span class="pln"> collect</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> IATA_CODE </span><span class="pun">=</span><span class="pln"> </span><span class="str">"BOS"</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> RADIUS </span><span class="pun">=</span><span class="pln"> </span><span class="str">"0"</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">WeatherClient</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Client</span><span class="pln"> client </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ClientBuilder</span><span class="pun">.</span><span class="pln">newClient</span><span class="pun">();</span><span class="pln">
        query </span><span class="pun">=</span><span class="pln"> client</span><span class="pun">.</span><span class="pln">target</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">BASE_URI</span><span class="pun">).</span><span class="pln">path</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">QUERY</span><span class="pun">);</span><span class="pln">
        collect </span><span class="pun">=</span><span class="pln"> client</span><span class="pun">.</span><span class="pln">target</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">BASE_URI</span><span class="pun">).</span><span class="pln">path</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">COLLECT</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> pingCollect</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">WebTarget</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> collect</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">PING</span><span class="pun">);</span><span class="pln">
        </span><span class="typ">Response</span><span class="pln"> response </span><span class="pun">=</span><span class="pln"> path</span><span class="pun">.</span><span class="pln">request</span><span class="pun">().</span><span class="pln">get</span><span class="pun">();</span><span class="pln">
        LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="pln">response</span><span class="pun">.</span><span class="pln">getStatusInfo</span><span class="pun">().</span><span class="pln">getReasonPhrase</span><span class="pun">());</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> query</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> iata</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">WebTarget</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> query</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">WEATHER</span><span class="pun">).</span><span class="pln">path</span><span class="pun">(</span><span class="pln">iata</span><span class="pun">).</span><span class="pln">path</span><span class="pun">(</span><span class="pln">RADIUS</span><span class="pun">);</span><span class="pln">
        </span><span class="typ">Response</span><span class="pln"> response </span><span class="pun">=</span><span class="pln"> path</span><span class="pun">.</span><span class="pln">request</span><span class="pun">().</span><span class="pln">get</span><span class="pun">();</span><span class="pln">
        LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="pln">response</span><span class="pun">.</span><span class="pln">readEntity</span><span class="pun">(</span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> pingQuery</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">WebTarget</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> query</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">PING</span><span class="pun">);</span><span class="pln">
        </span><span class="typ">Response</span><span class="pln"> response </span><span class="pun">=</span><span class="pln"> path</span><span class="pun">.</span><span class="pln">request</span><span class="pun">().</span><span class="pln">get</span><span class="pun">();</span><span class="pln">
        LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="pln">response</span><span class="pun">.</span><span class="pln">readEntity</span><span class="pun">(</span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> populate</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> pointType</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> first</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> last</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> mean</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> median</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> count</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">WebTarget</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> collect</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">WEATHER</span><span class="pun">).</span><span class="pln">path</span><span class="pun">(</span><span class="pln">IATA_CODE</span><span class="pun">).</span><span class="pln">path</span><span class="pun">(</span><span class="pln">pointType</span><span class="pun">);</span><span class="pln">
        </span><span class="typ">DataPoint</span><span class="pln"> dp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DataPoint</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">().</span><span class="pln">withFirst</span><span class="pun">(</span><span class="pln">first</span><span class="pun">).</span><span class="pln">withLast</span><span class="pun">(</span><span class="pln">last</span><span class="pun">).</span><span class="pln">withMean</span><span class="pun">(</span><span class="pln">mean</span><span class="pun">).</span><span class="pln">withMedian</span><span class="pun">(</span><span class="pln">median</span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">withCount</span><span class="pun">(</span><span class="pln">count</span><span class="pun">).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">
        </span><span class="typ">Response</span><span class="pln"> post </span><span class="pun">=</span><span class="pln"> path</span><span class="pun">.</span><span class="pln">request</span><span class="pun">().</span><span class="pln">post</span><span class="pun">(</span><span class="typ">Entity</span><span class="pun">.</span><span class="pln">entity</span><span class="pun">(</span><span class="pln">dp</span><span class="pun">,</span><span class="pln"> </span><span class="typ">MediaType</span><span class="pun">.</span><span class="pln">APPLICATION_JSON</span><span class="pun">));</span><span class="pln">
        LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="pln">post</span><span class="pun">.</span><span class="pln">getStatusInfo</span><span class="pun">().</span><span class="pln">getReasonPhrase</span><span class="pun">());</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> exit</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">        
        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            collect</span><span class="pun">.</span><span class="pln">path</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">EXIT</span><span class="pun">).</span><span class="pln">request</span><span class="pun">().</span><span class="pln">get</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">ProcessingException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// Empty catch block.</span><span class="pln">
            </span><span class="com">// This is to safely complete invocation</span><span class="pln">
            </span><span class="com">// calling exit endpoint will possibly throw ConnectException since underlying JVM of server will be shutdown.</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">WeatherClient</span><span class="pln"> wc </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WeatherClient</span><span class="pun">();</span><span class="pln">
        wc</span><span class="pun">.</span><span class="pln">pingCollect</span><span class="pun">();</span><span class="pln">
        wc</span><span class="pun">.</span><span class="pln">populate</span><span class="pun">(</span><span class="str">"wind"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pun">);</span><span class="pln">

        wc</span><span class="pun">.</span><span class="pln">query</span><span class="pun">(</span><span class="str">"BOS"</span><span class="pun">);</span><span class="pln">
        wc</span><span class="pun">.</span><span class="pln">query</span><span class="pun">(</span><span class="str">"JFK"</span><span class="pun">);</span><span class="pln">
        wc</span><span class="pun">.</span><span class="pln">query</span><span class="pun">(</span><span class="str">"EWR"</span><span class="pun">);</span><span class="pln">
        wc</span><span class="pun">.</span><span class="pln">query</span><span class="pun">(</span><span class="str">"LGA"</span><span class="pun">);</span><span class="pln">
        wc</span><span class="pun">.</span><span class="pln">query</span><span class="pun">(</span><span class="str">"MMU"</span><span class="pun">);</span><span class="pln">

        wc</span><span class="pun">.</span><span class="pln">pingQuery</span><span class="pun">();</span><span class="pln">
        wc</span><span class="pun">.</span><span class="pln">exit</span><span class="pun">();</span><span class="pln">
        LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">"Complete"</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">/**
 * A main method used to test the Weather Application. You are free to modify this main method
 * as you wish - it's in not used by the grader.
 *
 * @author code test administrator
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WeatherServer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Logger</span><span class="pln"> LOGGER </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Logger</span><span class="pun">.</span><span class="pln">getLogger</span><span class="pun">(</span><span class="typ">WeatherServer</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">());</span><span class="pln">

    </span><span class="com">/** Denotes if HTTP should start immediately after instantiation */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> START_IMMEDIATE </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/** How long to wait to shut server down (in seconds) */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> SHUTDOWN_PERIOD </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1L</span><span class="pun">;</span><span class="pln">


    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">"Starting Weather App local testing server: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">BASE_URI</span><span class="pun">);</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">"Not for production use"</span><span class="pun">);</span><span class="pln">

            init</span><span class="pun">();</span><span class="pln">

            </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ResourceConfig</span><span class="pln"> resourceConfig </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ResourceConfig</span><span class="pun">();</span><span class="pln">
            resourceConfig</span><span class="pun">.</span><span class="kwd">register</span><span class="pun">(</span><span class="typ">RestWeatherQueryEndpoint</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
            resourceConfig</span><span class="pun">.</span><span class="kwd">register</span><span class="pun">(</span><span class="typ">RestWeatherCollectorEndpoint</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">

            resourceConfig</span><span class="pun">.</span><span class="kwd">register</span><span class="pun">(</span><span class="typ">JacksonFeature</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">

            </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">HttpServer</span><span class="pln"> server </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GrizzlyHttpServerFactory</span><span class="pun">.</span><span class="pln">createHttpServer</span><span class="pun">(</span><span class="pln">URI</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">BASE_URI</span><span class="pun">),</span><span class="pln"> resourceConfig</span><span class="pun">,</span><span class="pln"> START_IMMEDIATE</span><span class="pun">);</span><span class="pln">

            </span><span class="typ">Runtime</span><span class="pun">.</span><span class="pln">getRuntime</span><span class="pun">().</span><span class="pln">addShutdownHook</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Runnable</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="lit">@Override</span><span class="pln">
                </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> run</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                    LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">"Shutting down Weather Server."</span><span class="pun">);</span><span class="pln">
                    server</span><span class="pun">.</span><span class="pln">shutdown</span><span class="pun">(</span><span class="pln">SHUTDOWN_PERIOD</span><span class="pun">,</span><span class="pln"> </span><span class="typ">TimeUnit</span><span class="pun">.</span><span class="pln">SECONDS</span><span class="pun">);</span><span class="pln">
                </span><span class="pun">}</span><span class="pln">
            </span><span class="pun">}));</span><span class="pln">

            </span><span class="typ">HttpServerProbe</span><span class="pln"> probe </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HttpServerProbe</span><span class="pun">.</span><span class="typ">Adapter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="lit">@SuppressWarnings</span><span class="pun">(</span><span class="str">"rawtypes"</span><span class="pun">)</span><span class="pln"> 
                </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onRequestReceiveEvent</span><span class="pun">(</span><span class="typ">HttpServerFilter</span><span class="pln"> filter</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Connection</span><span class="pln"> connection</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Request</span><span class="pln"> request</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                    </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="pln">request</span><span class="pun">.</span><span class="pln">getRequestURI</span><span class="pun">());</span><span class="pln">
                </span><span class="pun">}</span><span class="pln">
            </span><span class="pun">};</span><span class="pln">

            server</span><span class="pun">.</span><span class="pln">getServerConfiguration</span><span class="pun">().</span><span class="pln">getMonitoringConfig</span><span class="pun">().</span><span class="pln">getWebServerConfig</span><span class="pun">().</span><span class="pln">addProbes</span><span class="pun">(</span><span class="pln">probe</span><span class="pun">);</span><span class="pln">
            server</span><span class="pun">.</span><span class="pln">start</span><span class="pun">();</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="str">"Weather Server started."</span><span class="pun">);</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">info</span><span class="pun">(</span><span class="typ">String</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="str">"URL = %s"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Paths</span><span class="pun">.</span><span class="typ">UriPath</span><span class="pun">.</span><span class="pln">BASE_URI</span><span class="pun">));</span><span class="pln">


            </span><span class="com">// blocks until exit</span><span class="pln">
            </span><span class="typ">Thread</span><span class="pun">.</span><span class="pln">currentThread</span><span class="pun">().</span><span class="pln">join</span><span class="pun">();</span><span class="pln">
            server</span><span class="pun">.</span><span class="pln">shutdown</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">InterruptedException</span><span class="pln"> ex</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Level</span><span class="pun">.</span><span class="pln">SEVERE</span><span class="pun">,</span><span class="pln"> ex</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> ex</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

   </span><span class="com">/**
    * A dummy init method that loads hard coded data
    *
    */</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">ServiceFacade</span><span class="pln"> facade </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WeatherServiceFacade</span><span class="pun">(</span><span class="typ">RepositoryType</span><span class="pun">.</span><span class="pln">IN_MEMORY</span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            facade</span><span class="pun">.</span><span class="pln">addAirport</span><span class="pun">(</span><span class="str">"BOS"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"42.364347"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"-71.005181"</span><span class="pun">);</span><span class="pln">
            facade</span><span class="pun">.</span><span class="pln">addAirport</span><span class="pun">(</span><span class="str">"EWR"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"40.6925"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"-74.168667"</span><span class="pun">);</span><span class="pln">
            facade</span><span class="pun">.</span><span class="pln">addAirport</span><span class="pun">(</span><span class="str">"JFK"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"40.639751"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"-73.778925"</span><span class="pun">);</span><span class="pln">
            facade</span><span class="pun">.</span><span class="pln">addAirport</span><span class="pun">(</span><span class="str">"LGA"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"40.777245"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"-73.872608"</span><span class="pun">);</span><span class="pln">
            facade</span><span class="pun">.</span><span class="pln">addAirport</span><span class="pun">(</span><span class="str">"MMU"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"40.79935"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"-74.414874"</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WeatherException</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">NumberFormatException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            LOGGER</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="typ">Level</span><span class="pun">.</span><span class="pln">SEVERE</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln"> e</span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>

<p>Is the code above good enough in terms of thread-safety and efficiency ?</p>
    </div>
    <div class="post-taglist">
        <a href="http://codereview.stackexchange.com/questions/tagged/java" class="post-tag js-gps-track" title="" rel="tag">java</a> <a href="http://codereview.stackexchange.com/questions/tagged/thread-safety" class="post-tag js-gps-track" title="show questions tagged &#39;thread-safety&#39;" rel="tag">thread-safety</a> <a href="http://codereview.stackexchange.com/questions/tagged/concurrency" class="post-tag js-gps-track" title="show questions tagged &#39;concurrency&#39;" rel="tag">concurrency</a> <a href="http://codereview.stackexchange.com/questions/tagged/rest" class="post-tag js-gps-track" title="show questions tagged &#39;rest&#39;" rel="tag">rest</a> 
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="http://codereview.stackexchange.com/q/124177" title="short permalink to this question" class="short-link" id="link-post-124177">share</a><span class="lsep">|</span><a href="http://codereview.stackexchange.com/posts/124177/edit" class="suggest-edit-post" title="">improve this question</a></div>        
    </td>
    <td class="post-signature owner">
        <div class="user-info ">
    <div class="user-action-time">
        asked <span title="2016-03-29 13:13:31Z" class="relativetime">Mar 29 at 13:13</span>
    </div>
    <div class="user-gravatar32">
        <a href="http://codereview.stackexchange.com/users/101484/6675636b"><div class="gravatar-wrapper-32"><img src="./java - Thread safe REST API - Code Review Stack Exchange_files/e143af784f9f971bad7d4e085ca26053" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="http://codereview.stackexchange.com/users/101484/6675636b">6675636b</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">6</span><span title="1 bronze badge"><span class="badge3"></span><span class="badgecount">1</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</div>
</td>
        </tr>
                
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-124177" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-124177" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" onclick=""></a>
        </div>         
    </td>
</tr>        </tbody></table>
</div>

			<div id="answers">

				<a name="tab-top"></a>
				<div id="answers-header">
					<div class="subheader answers-subheader">
						<h2>
								1 Answer
                                <span style="display:none;" itemprop="answerCount">1</span>
						</h2>
						<div>
							<div id="tabs">
        <a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api?answertab=active#tab-top" data-nav-xhref="" title="Answers with the latest activity first" data-value="active" data-shortcut="A">
            active</a>
        <a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api?answertab=oldest#tab-top" data-nav-xhref="" title="Answers in the order they were provided" data-value="oldest" data-shortcut="O">
            oldest</a>
        <a class="youarehere" href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api?answertab=votes#tab-top" data-nav-xhref="" title="Answers with the highest score first" data-value="votes" data-shortcut="V">
            votes</a>
</div>
						</div>
					</div>    
				</div>    




  
<a name="126922"></a>
<div id="answer-126922" class="answer" data-answerid="126922" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input type="hidden" name="_id_" value="126922">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">2</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>I think you may be overusing string constants. I know it's not good to use magic numbers and constants, especially if they are being used in multiple places. There are quite a few constants in your code which are only used once and I feel it would be better to use them directly (for contextual understanding of code) rather than naming constants for them. Btw, did this code get you the job? </p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="http://codereview.stackexchange.com/a/126922" title="short permalink to this answer" class="short-link" id="link-post-126922">share</a><span class="lsep">|</span><a href="http://codereview.stackexchange.com/posts/126922/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2016-04-28 07:22:32Z" class="relativetime">Apr 28 at 7:22</span>
    </div>
    <div class="user-gravatar32">
        <a href="http://codereview.stackexchange.com/users/104060/beaver"><div class="gravatar-wrapper-32"><img src="./java - Thread safe REST API - Code Review Stack Exchange_files/831e2da5fd6337effa8eb4981e815b47" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="http://codereview.stackexchange.com/users/104060/beaver">Beaver</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">21</span><span title="1 bronze badge"><span class="badge3"></span><span class="badgecount">1</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-126922" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-126922" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>
									<a name="new-answer"></a>
						<form id="post-form" action="http://codereview.stackexchange.com/questions/124177/answer/submit" method="post" class="post-form">
						    <input type="hidden" id="post-id" value="124177">
                            <input type="hidden" id="qualityBanWarningShown" name="qualityBanWarningShown" value="false">
                            <input type="hidden" name="referrer" value="https://www.google.com.mx/">
							<h2 class="space">Your Answer</h2>

        <script>
            StackExchange.ifUsing("editor", function () {
                return StackExchange.using("mathjaxEditing", function () {
                    StackExchange.MarkdownEditor.creationCallbacks.add(function (editor, postfix) {
                        StackExchange.mathjaxEditing.prepareWmdForMathJax(editor, postfix, [["\\$", "\\$"]]);
                    });
                });
            }, "mathjax-editing");
        </script>

            <script>
            StackExchange.ifUsing("editor", function () {
                StackExchange.using("externalEditor", function () {
                    StackExchange.using("snippets", function () {
                        StackExchange.snippets.init();
                    });
                });
            }, "code-snippets");
        </script>
    

<script>
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
       
        StackExchange.using("externalEditor", function() {
                // Have to fire editor after snippets, if snippets enabled
                if (StackExchange.settings.snippets.snippetsEnabled) {
                    StackExchange.using("snippets", function() {
                        createEditor();
                    });
                }
                else {
                    createEditor();
                }
            });

            function createEditor() {
                prepareEditor({
                    heartbeatType: 'answer',
                convertImagesToLinks: false,
                reputationToPostImages: null,
                bindNavPrevention: true,
                postfix: "",
                    onDemand: true,
                    discardSelector: ".discard-answer"
                    ,immediatelyShowMarkdownHelp:true
                    });
                

        }
    });  
</script>


<div id="post-editor" class="post-editor js-post-editor">

    <div style="position: relative;">     
        <div class="wmd-container">
            <div id="wmd-button-bar" class="wmd-button-bar"><ul id="wmd-button-row" class="wmd-button-row"><li id="wmd-bold-button" class="wmd-button" style="left: 0px;"><span style="background-position: 0px -20px;"></span></li><li id="wmd-italic-button" class="wmd-button" style="left: 25px;"><span style="background-position: -20px -20px;"></span></li><li id="wmd-spacer1" class="wmd-spacer" style="left: 50px;"><span style="background-position: -40px -20px;"></span></li><li id="wmd-link-button" class="wmd-button" style="left: 75px;"><span style="background-position: -40px -20px;"></span></li><li id="wmd-quote-button" class="wmd-button" style="left: 100px;"><span style="background-position: -60px -20px;"></span></li><li id="wmd-code-button" class="wmd-button" style="left: 125px;"><span style="background-position: -80px -20px;"></span></li><li id="wmd-image-button" class="wmd-button" style="left: 150px;"><span style="background-position: -100px -20px;"></span></li><li id="wmd-spacer2" class="wmd-spacer" style="left: 175px;"><span style="background-position: -120px -20px;"></span></li><li id="wmd-olist-button" class="wmd-button" style="left: 200px;"><span style="background-position: -120px -20px;"></span></li><li id="wmd-ulist-button" class="wmd-button" style="left: 225px;"><span style="background-position: -140px -20px;"></span></li><li id="wmd-heading-button" class="wmd-button" style="left: 250px;"><span style="background-position: -160px -20px;"></span></li><li id="wmd-hr-button" class="wmd-button" style="left: 275px;"><span style="background-position: -180px -20px;"></span></li><li id="wmd-spacer3" class="wmd-spacer" style="left: 300px;"><span style="background-position: -200px -20px;"></span></li><li id="wmd-undo-button" class="wmd-button" style="left: 325px;"><span style="background-position: -200px -20px;"></span></li><li id="wmd-redo-button" class="wmd-button" style="left: 350px;"><span style="background-position: -220px -20px;"></span></li></ul></div>
            <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101" data-min-length=""></textarea>
        </div>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>



    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" type="hidden" value="40041c037e38a37a7adbd81589319251">
        <input id="author" name="author" type="text">
    </div>



</div>
							<div style="position: relative;">
								
								            <div class="form-item new-post-login">
        
                <div class="new-login-form">
                    <div class="new-login-left">
                        <h3>Sign up or <a id="login-link" href="http://codereview.stackexchange.com/users/login?ssrc=question_page&amp;returnurl=http%3a%2f%2fcodereview.stackexchange.com%2fquestions%2f124177%2fthread-safe-rest-api%23new-answer">log in</a></h3>
                        <script>
                            StackExchange.ready(function () {
                                StackExchange.helpers.onClickDraftSave('#login-link');
                            });
                        </script>
                        <div class="preferred-login google-login">
                            <p><span class="icon"></span><span>Sign up using Google</span></p>
                        </div>
                        <div class="preferred-login facebook-login">
                            <p><span class="icon"></span><span>Sign up using Facebook</span></p>
                        </div>
                        <div class="preferred-login stackexchange-login">
                            <p><span class="icon"></span><span>Sign up using Email and Password</span></p>
                        </div>
                    </div>
                    <input type="hidden" name="manual-openid" class="manual-openid">
                    <input type="hidden" name="use-facebook" class="use-facebook" value="false">
                    <input type="hidden" name="use-google" class="use-google" value="false">
                    <input type="button" class="submit-openid" value="Submit" style="display:none">
                    <div class="new-login-right">
                                <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tbody><tr>
                    <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="email" size="30" maxlength="100" value="" tabindex="106" placeholder="required, but never shown">
                </div>
            </td>
        </tr>
        </tbody></table>
    </div>

                    </div>
                </div>
            </div>
            <script>
                StackExchange.ready(
                    function () {
                        StackExchange.openid.initPostLogin('.new-post-login', 'http%3a%2f%2fcodereview.stackexchange.com%2fquestions%2f124177%2fthread-safe-rest-api%23new-answer', 'question_page');
                    }
                );
            </script>
            <noscript>
                        &lt;h3&gt;Post as a guest&lt;/h3&gt;
    &lt;div class="form-item"&gt;
        &lt;table&gt;
        &lt;tr&gt;
                    &lt;td class="vm"&gt;
                &lt;div&gt;
                    &lt;label for="display-name"&gt;Name&lt;/label&gt;
                    &lt;input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105"&gt;
                &lt;/div&gt;
                &lt;div&gt;
                    &lt;label for="m-address"&gt;Email&lt;/label&gt;
                    &lt;input id="m-address" name="m-address" type="email" size="30" maxlength="100" value="" tabindex="106" placeholder="required, but never shown" /&gt;
                &lt;/div&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/div&gt;

            </noscript>

							</div>
           
															<div class="form-submit cbt">
									<input id="submit-button" type="submit" value="Post Your Answer" tabindex="110">
									<a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api#" class="btn-clear discard-answer dno">discard</a>

<p class="privacy-policy-agreement">
By posting your answer, you agree to the <a href="http://stackexchange.com/legal/privacy-policy" target="_blank">privacy policy</a> and <a href="http://stackexchange.com/legal/terms-of-service" target="_blank">terms of service</a>.</p>
<input type="hidden" name="legalLinksShown" value="1">								</div>
						</form>



						<h2 class="bottom-notice" data-loc="1">
Not the answer you're looking for?							Browse other questions tagged <a href="http://codereview.stackexchange.com/questions/tagged/java" class="post-tag" title="show questions tagged &#39;java&#39;" rel="tag">java</a> <a href="http://codereview.stackexchange.com/questions/tagged/thread-safety" class="post-tag" title="show questions tagged &#39;thread-safety&#39;" rel="tag">thread-safety</a> <a href="http://codereview.stackexchange.com/questions/tagged/concurrency" class="post-tag" title="show questions tagged &#39;concurrency&#39;" rel="tag">concurrency</a> <a href="http://codereview.stackexchange.com/questions/tagged/rest" class="post-tag" title="show questions tagged &#39;rest&#39;" rel="tag">rest</a>  or <a href="http://codereview.stackexchange.com/questions/ask">ask your own question</a>.						</h2>
			</div>
		</div>
				<div id="sidebar" class="show-votes">
						    <div class="module question-stats">
			        <table id="qinfo">
			            <tbody><tr>
			                <td>
			                    <p class="label-key">asked</p>
			                </td>
			                <td style="padding-left: 10px">
			                    <p class="label-key" title="2016-03-29 13:13:31Z"><b>7 months ago</b></p>
			                </td>
			            </tr>
			            <tr>
			                <td>
			                    <p class="label-key">viewed</p>
			                </td>

			                <td style="padding-left: 10px">
			                    <p class="label-key">
			                        <b>311 times</b>
			                    </p>
			                </td>
			            </tr>
			                <tr>
			                    <td>
			                        <p class="label-key">active</p>
			                    </td>
			                    <td style="padding-left: 10px">
			                        <p class="label-key"><b><a href="http://codereview.stackexchange.com/questions/124177/thread-safe-rest-api?lastactivity" class="lastactivity-link" title="2016-04-28 07:22:32Z">6 months ago</a></b></p>
			                    </td>
			                </tr>
			        </tbody></table>
			    </div>
			<div class="module community-bulletin" data-tracker="cb=1">
    <div class="related">
                <div class="bulletin-title">
                    Blog
                </div>
                <hr>
    <div class="spacer">
        <div class="bulletin-item-type">
                <a href="http://blog.stackoverflow.com/2016/10/Stack-Overflow-92-Podcast-The-Guerilla-Guide-to-Interviewing/?cb=1" class="question-hyperlink">
<div class="favicon favicon-stackexchangemeta" title="Meta Stack Exchange"></div>                </a>
            </div>
                <div class="bulletin-item-content">
                    <a href="http://blog.stackoverflow.com/2016/10/Stack-Overflow-92-Podcast-The-Guerilla-Guide-to-Interviewing/?cb=1" class="question-hyperlink">Stack Overflow Podcast #92 - The Guerilla Guide to Interviewing</a>
                </div>
                <br class="cbt">
            </div>
    </div>
</div>			
			<style type="text/css">
    .ads { margin-left: 60px; }
    .ad-container { width: 300px; height: 250px; margin-right: 20px; margin-bottom: 20px; }
    .ad-container .ad { height: 250px; }
    .ad-container .footer-container { overflow: hidden; height: 30px; position: relative; top: -30px; }
    .ad-container .footer-container .footer { font-family: Arial,Helvetic,Sans-Serif; font-size: 12px; text-align: center; padding-top: 9px; background-color: #000; color: #EFF; opacity: 0.9; filter: alpha(opacity=90); top: 30px; height: 30px; position: relative; }
    .ad-container a:hover { text-decoration: underline; }
    #adzerk2 { height: 250px; }
</style>
<script>
    StackExchange.ready(function () {
        $(".ad-container").hover(
            function () {
                $(".ad-container .footer-container .footer").stop(true, true).animate({ top: "0px" }, "fast");
            },
            function () {
                $(".ad-container .footer-container .footer").animate({ top: "30px" }, "fast");
            });
    });
</script>
    <div class="ad-container">    
        <div class="ad">    
        <a href="http://meta.codereview.stackexchange.com/ads/ct/6554?url=http%3a%2f%2fdevdocs.io&amp;s=8fa4ca6deb6587a254ca9675ba3b07811d550d1ea86b2256121efd1213085305" rel="nofollow" target="_blank"><img src="./java - Thread safe REST API - Code Review Stack Exchange_files/5DZKl.png" alt="DevDocs combines multiple API documentations in a fast, organized, and searchable interface." title="DevDocs combines multiple API documentations in a fast, organized, and searchable interface." width="300" height="250"></a>
        </div>
        <div class="footer-container">
            <div class="footer">
                16 votes · <a href="http://meta.codereview.stackexchange.com/questions/6539#6554" title="click to comment on this ad" target="_blank">comment</a> · <a href="http://meta.codereview.stackexchange.com/ads/display/6539" target="_blank">stats</a>
            </div>
        </div>
    </div>
			

            

				<div class="module sidebar-related">
					<h4 id="h-related">Related</h4>
                    <div class="related js-gps-related-questions" data-tracker="rq=1">
                        <div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/12613?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">1</div></a><a href="http://codereview.stackexchange.com/questions/12613/thread-safe-server-querier?rq=1" class="question-hyperlink">Thread Safe Server Querier</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/25743?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">1</div></a><a href="http://codereview.stackexchange.com/questions/25743/thread-safe-settings?rq=1" class="question-hyperlink">Thread safe settings</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/40079?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">3</div></a><a href="http://codereview.stackexchange.com/questions/40079/making-a-call-to-a-server-running-a-restful-service?rq=1" class="question-hyperlink">Making a call to a server running a RESTful service</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/41852?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes default">6</div></a><a href="http://codereview.stackexchange.com/questions/41852/thread-safe-retirement-account-class?rq=1" class="question-hyperlink">Thread-safe retirement account class</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/45655?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">11</div></a><a href="http://codereview.stackexchange.com/questions/45655/thread-safe-session-manager?rq=1" class="question-hyperlink">Thread-safe session manager</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/48411?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes default">12</div></a><a href="http://codereview.stackexchange.com/questions/48411/thread-safe-large-text-buffer?rq=1" class="question-hyperlink">Thread-safe large text buffer</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/84350?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes default">3</div></a><a href="http://codereview.stackexchange.com/questions/84350/simple-thread-safe-loading-cache-based-on-rxjava?rq=1" class="question-hyperlink">Simple thread-safe loading cache based on RxJava</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/84983?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">2</div></a><a href="http://codereview.stackexchange.com/questions/84983/safe-thread-synchronization?rq=1" class="question-hyperlink">Safe Thread Synchronization</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/94709?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes default">3</div></a><a href="http://codereview.stackexchange.com/questions/94709/thread-safe-irregular-rate-limiter?rq=1" class="question-hyperlink">Thread-safe irregular rate limiter</a></div><div class="spacer js-gps-track"><a href="http://codereview.stackexchange.com/q/105534?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">2</div></a><a href="http://codereview.stackexchange.com/questions/105534/java-pulse-between-threads?rq=1" class="question-hyperlink">Java “pulse” between threads</a></div>
                    </div>
				</div>
            
<div id="hot-network-questions" class="module">
    <h4>
        <a href="http://stackexchange.com/questions?tab=hot" class="js-gps-track" data-gps-track="posts_hot_network.click({ item_type:1, location:11 })">
            Hot Network Questions
        </a>
    </h4>
    <ul>
            <li>
                <div class="favicon favicon-codegolf" title="Programming Puzzles &amp; Code Golf Stack Exchange"></div><a href="http://codegolf.stackexchange.com/questions/97305/print-some-json" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:200 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Print some JSON
                </a>

            </li>
            <li>
                <div class="favicon favicon-physics" title="Physics Stack Exchange"></div><a href="http://physics.stackexchange.com/questions/288762/whats-the-point-of-paulis-exclusion-principle-if-time-and-space-are-continuous" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:151 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What's the point of Pauli's Exclusion Principle if time and space are continuous?
                </a>

            </li>
            <li>
                <div class="favicon favicon-codegolf" title="Programming Puzzles &amp; Code Golf Stack Exchange"></div><a href="http://codegolf.stackexchange.com/questions/97561/the-rule-of-thumb-for-title-capitalization" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:200 }); posts_hot_network.click({ item_type:2, location:11 })">
                    The Rule of Thumb for Title Capitalization
                </a>

            </li>
            <li>
                <div class="favicon favicon-scifi" title="Science Fiction &amp; Fantasy Stack Exchange"></div><a href="http://scifi.stackexchange.com/questions/143807/why-did-the-ministry-of-magic-choose-an-ax-for-carrying-out-a-death-sentence" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:186 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Why did the Ministry of Magic choose an ax for carrying out a death sentence?
                </a>

            </li>
            <li>
                <div class="favicon favicon-parenting" title="Parenting Stack Exchange"></div><a href="http://parenting.stackexchange.com/questions/27477/what-to-do-with-my-pre-teen-daughter-who-has-been-out-of-control-since-a-severe" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:228 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What to do with my pre-teen daughter who has been out of control since a severe accident?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-security" title="Information Security Stack Exchange"></div><a href="http://security.stackexchange.com/questions/140490/ddos-why-not-block-originating-ip-addresses" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:162 }); posts_hot_network.click({ item_type:2, location:11 })">
                    DDoS: Why not block originating IP addresses?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-travel" title="Travel Stack Exchange"></div><a href="http://travel.stackexchange.com/questions/81492/why-is-international-first-class-much-more-expensive-than-international-economy" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:273 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Why is international first class much more expensive than international economy class?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-worldbuilding" title="Worldbuilding Stack Exchange"></div><a href="http://worldbuilding.stackexchange.com/questions/59497/how-to-explain-the-use-of-high-tech-bows-instead-of-guns" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:579 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How to explain the use of high-tech bows instead of guns
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-security" title="Information Security Stack Exchange"></div><a href="http://security.stackexchange.com/questions/140984/could-iot-botnets-be-stopped-by-static-ip-addressing-the-devices" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:162 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Could IOT Botnets be Stopped by Static IP addressing the Devices?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-superuser" title="Super User"></div><a href="http://superuser.com/questions/1138707/ssh-makes-all-typed-passwords-visible-when-command-is-provided-as-an-argument-to" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:3 }); posts_hot_network.click({ item_type:2, location:11 })">
                    SSH makes all typed passwords visible when command is provided as an argument to the SSH command
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-ell" title="English Language Learners Stack Exchange"></div><a href="http://ell.stackexchange.com/questions/107576/how-do-you-say-enchufado-in-english" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:481 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How do you say "enchufado" in English?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-math" title="Mathematics Stack Exchange"></div><a href="http://math.stackexchange.com/questions/1984005/if-the-square-root-of-two-is-irrational-why-can-it-be-created-by-dividing-two-n" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:69 }); posts_hot_network.click({ item_type:2, location:11 })">
                    If the square root of two is irrational, why can it be created by dividing two numbers?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-scifi" title="Science Fiction &amp; Fantasy Stack Exchange"></div><a href="http://scifi.stackexchange.com/questions/143854/how-come-ferengi-starships-work" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:186 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How come Ferengi starships work?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-sqa" title="Software Quality Assurance &amp; Testing Stack Exchange"></div><a href="http://sqa.stackexchange.com/questions/23317/how-to-explain-the-concept-of-test-automation-to-a-team-that-only-knows-manual-t" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:244 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How to explain the concept of test automation to a team that only knows manual testing?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-bitcoin" title="Bitcoin Stack Exchange"></div><a href="http://bitcoin.stackexchange.com/questions/49227/does-bitcoin-have-the-potential-to-be-subject-to-a-hard-fork-where-miners-are-fo" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:308 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Does bitcoin have the potential to be subject to a hard fork where miners are forced to choose which fork they will accept, like Etherum?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-physics" title="Physics Stack Exchange"></div><a href="http://physics.stackexchange.com/questions/288980/schr%c3%b6dingers-cat-and-gravitational-waves" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:151 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Schrödinger's cat and Gravitational waves
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-worldbuilding" title="Worldbuilding Stack Exchange"></div><a href="http://worldbuilding.stackexchange.com/questions/59560/how-does-a-migratory-species-advance-past-the-stone-age" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:579 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How does a migratory species advance past the Stone Age?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-security" title="Information Security Stack Exchange"></div><a href="http://security.stackexchange.com/questions/140760/does-the-local-network-need-to-be-hacked-first-for-iot-devices-to-be-accesible" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:162 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Does the local network need to be hacked first for IoT devices to be accesible?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-travel" title="Travel Stack Exchange"></div><a href="http://travel.stackexchange.com/questions/81473/forgotten-lost-highway-new-zealand-is-it-advisable-to-do-it-in-a-rental-car" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:273 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Forgotten Lost Highway (New Zealand ) - Is it advisable to do it in a rental car?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-stackoverflow" title="Stack Overflow"></div><a href="http://stackoverflow.com/questions/40268641/generating-a-sequence-of-type-t-at-compile-time" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:1 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Generating a sequence of type T at compile time
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-stackoverflow" title="Stack Overflow"></div><a href="http://stackoverflow.com/questions/40262231/are-c14-digit-separators-allowed-in-user-defined-literals" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:1 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Are C++14 digit separators allowed in user defined literals?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-academia" title="Academia Stack Exchange"></div><a href="http://academia.stackexchange.com/questions/78798/does-dropping-a-coursera-course-look-bad-in-a-phd-application-to-the-university" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:415 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Does dropping a Coursera course look bad in a PhD application to the university offering the course?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-gaming" title="Arqade"></div><a href="http://gaming.stackexchange.com/questions/289409/what-is-this-plant-in-clash-of-clans" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:41 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What is this plant in Clash of Clans?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-academia" title="Academia Stack Exchange"></div><a href="http://academia.stackexchange.com/questions/78763/should-non-native-speakers-get-extra-time-to-compose-exam-answers" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:415 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Should non-native speakers get extra time to compose exam answers?
                </a>

            </li>
    </ul>

        
</div>
		</div>
	
<div id="feed-link">
    <div id="feed-link-text">
        <a href="http://codereview.stackexchange.com/feeds/question/124177" title="feed of this question and its answers">
            <span class="feed-icon"></span>question feed
        </a>
    </div>
</div>	<script>
StackExchange.ready(function(){$.get('/posts/124177/ivc/6a3a');});
</script>
<noscript>
    &lt;div&gt;&lt;img src="/posts/124177/ivc/6a3a" class="dno" alt="" width="0" height="0"&gt;&lt;/div&gt;
</noscript><div style="display:none" id="prettify-lang">lang-java</div></div>


        </div>
    </div>
    <div id="footer" class="categories">
        <div class="footerwrap">            
            <div id="footer-menu">
                <div class="top-footer-links">
                    <a href="http://stackoverflow.com/company/about">about us</a>
                        <a href="http://codereview.stackexchange.com/tour">tour</a>
                    <a href="http://codereview.stackexchange.com/help">help</a>
                    <a href="http://blog.stackoverflow.com/?blb=1">blog</a>
                        <a href="http://chat.stackexchange.com/?tab=site&amp;host=codereview.stackexchange.com">chat</a>
                    <a href="http://data.stackexchange.com/">data</a>
                    <a href="http://stackexchange.com/legal">legal</a>
                    <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a>
                    <a href="http://stackoverflow.com/company/work-here">work here</a>
                    <a href="http://stackexchange.com/mediakit">advertising info</a>

                    <a onclick="StackExchange.switchMobile(&quot;on&quot;)">mobile</a>
                    <b><a href="http://codereview.stackexchange.com/contact">contact us</a></b>
                        <b><a href="http://meta.codereview.stackexchange.com/">feedback</a></b>
                    
                </div>
                <div id="footer-sites">
                    <table>
    <tbody><tr>
            <th colspan="4">
                Technology
            </th>
            <th colspan="2">
                Life / Arts
            </th>
            <th colspan="2">
                Culture / Recreation
            </th>
            <th colspan="2">
                Science
            </th>
            <th>
                Other
            </th>
    </tr>
    <tr>
            <td>
                <ol>
                        <li><a href="http://stackoverflow.com/" title="professional and enthusiast programmers">Stack Overflow</a></li>
                        <li><a href="http://serverfault.com/" title="system and network administrators">Server Fault</a></li>
                        <li><a href="http://superuser.com/" title="computer enthusiasts and power users">Super User</a></li>
                        <li><a href="http://webapps.stackexchange.com/" title="power users of web applications">Web Applications</a></li>
                        <li><a href="http://askubuntu.com/" title="Ubuntu users and developers">Ask Ubuntu</a></li>
                        <li><a href="http://webmasters.stackexchange.com/" title="pro webmasters">Webmasters</a></li>
                        <li><a href="http://gamedev.stackexchange.com/" title="professional and independent game developers">Game Development</a></li>
                        <li><a href="http://tex.stackexchange.com/" title="users of TeX, LaTeX, ConTeXt, and related typesetting systems">TeX - LaTeX</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://softwareengineering.stackexchange.com/" title="professionals, academics, and students working within the systems development life cycle who care about creating, delivering, and maintaining software responsibly">Software Engineering</a></li>
                        <li><a href="http://unix.stackexchange.com/" title="users of Linux, FreeBSD and other Un*x-like operating systems">Unix &amp; Linux</a></li>
                        <li><a href="http://apple.stackexchange.com/" title="power users of Apple hardware and software">Ask Different (Apple)</a></li>
                        <li><a href="http://wordpress.stackexchange.com/" title="WordPress developers and administrators">WordPress Development</a></li>
                        <li><a href="http://gis.stackexchange.com/" title="cartographers, geographers and GIS professionals">Geographic Information Systems</a></li>
                        <li><a href="http://electronics.stackexchange.com/" title="electronics and electrical engineering professionals, students, and enthusiasts">Electrical Engineering</a></li>
                        <li><a href="http://android.stackexchange.com/" title="enthusiasts and power users of the Android operating system">Android Enthusiasts</a></li>
                        <li><a href="http://security.stackexchange.com/" title="information security professionals">Information Security</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://dba.stackexchange.com/" title="database professionals who wish to improve their database skills and learn from others in the community">Database Administrators</a></li>
                        <li><a href="http://drupal.stackexchange.com/" title="Drupal developers and administrators">Drupal Answers</a></li>
                        <li><a href="http://sharepoint.stackexchange.com/" title="SharePoint enthusiasts">SharePoint</a></li>
                        <li><a href="http://ux.stackexchange.com/" title="user experience researchers and experts">User Experience</a></li>
                        <li><a href="http://mathematica.stackexchange.com/" title="users of Mathematica">Mathematica</a></li>
                        <li><a href="http://salesforce.stackexchange.com/" title="Salesforce administrators, implementation experts, developers and anybody in-between">Salesforce</a></li>
                        <li><a href="http://expressionengine.stackexchange.com/" title="administrators, end users, developers and designers for ExpressionEngine® CMS">ExpressionEngine® Answers</a></li>
                        <li><a href="http://crypto.stackexchange.com/" title="software developers, mathematicians and others interested in cryptography">Cryptography</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://codereview.stackexchange.com/" title="peer programmer code reviews">Code Review</a></li>
                        <li><a href="http://magento.stackexchange.com/" title="users of the Magento e-Commerce platform">Magento</a></li>
                        <li><a href="http://dsp.stackexchange.com/" title="practitioners of the art and science of signal, image and video processing">Signal Processing</a></li>
                        <li><a href="http://raspberrypi.stackexchange.com/" title="users and developers of hardware and software for Raspberry Pi">Raspberry Pi</a></li>
                        <li><a href="http://codegolf.stackexchange.com/" title="programming puzzle enthusiasts and code golfers">Programming Puzzles &amp; Code Golf</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#technology" class="more">
                                more (7)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://photo.stackexchange.com/" title="professional, enthusiast and amateur photographers">Photography</a></li>
                        <li><a href="http://scifi.stackexchange.com/" title="science fiction and fantasy enthusiasts">Science Fiction &amp; Fantasy</a></li>
                        <li><a href="http://graphicdesign.stackexchange.com/" title="Graphic Design professionals, students, and enthusiasts">Graphic Design</a></li>
                        <li><a href="http://movies.stackexchange.com/" title="movie and tv enthusiasts">Movies &amp; TV</a></li>
                        <li><a href="http://music.stackexchange.com/" title="musicians, students, and enthusiasts">Music: Practice &amp; Theory</a></li>
                        <li><a href="http://cooking.stackexchange.com/" title="professional and amateur chefs">Seasoned Advice (cooking)</a></li>
                        <li><a href="http://diy.stackexchange.com/" title="contractors and serious DIYers">Home Improvement</a></li>
                        <li><a href="http://money.stackexchange.com/" title="people who want to be financially literate">Personal Finance &amp; Money</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://academia.stackexchange.com/" title="academics and those enrolled in higher education">Academia</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#lifearts" class="more">
                                more (8)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://english.stackexchange.com/" title="linguists, etymologists, and serious English language enthusiasts">English Language &amp; Usage</a></li>
                        <li><a href="http://skeptics.stackexchange.com/" title="scientific skepticism">Skeptics</a></li>
                        <li><a href="http://judaism.stackexchange.com/" title="those who base their lives on Jewish law and tradition and anyone interested in learning more">Mi Yodeya (Judaism)</a></li>
                        <li><a href="http://travel.stackexchange.com/" title="road warriors and seasoned travelers">Travel</a></li>
                        <li><a href="http://christianity.stackexchange.com/" title="committed Christians, experts in Christianity and those interested in learning more">Christianity</a></li>
                        <li><a href="http://ell.stackexchange.com/" title="speakers of other languages learning English">English Language Learners</a></li>
                        <li><a href="http://japanese.stackexchange.com/" title="students, teachers, and linguists wanting to discuss the finer points of the Japanese language">Japanese Language</a></li>
                        <li><a href="http://gaming.stackexchange.com/" title="passionate videogamers on all platforms">Arqade (gaming)</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://bicycles.stackexchange.com/" title="people who build and repair bicycles, people who train cycling, or commute on bicycles">Bicycles</a></li>
                        <li><a href="http://rpg.stackexchange.com/" title="gamemasters and players of tabletop, paper-and-pencil role-playing games">Role-playing Games</a></li>
                        <li><a href="http://anime.stackexchange.com/" title="anime and manga fans">Anime &amp; Manga</a></li>
                        <li><a href="http://mechanics.stackexchange.com/" title="mechanics and DIY enthusiast owners of cars, trucks, and motorcycles">Motor Vehicle Maintenance &amp; Repair</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#culturerecreation" class="more">
                                more (17)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://mathoverflow.net/" title="professional mathematicians">MathOverflow</a></li>
                        <li><a href="http://math.stackexchange.com/" title="people studying math at any level and professionals in related fields">Mathematics</a></li>
                        <li><a href="http://stats.stackexchange.com/" title="people interested in statistics, machine learning, data analysis, data mining, and data visualization">Cross Validated (stats)</a></li>
                        <li><a href="http://cstheory.stackexchange.com/" title="theoretical computer scientists and researchers in related fields">Theoretical Computer Science</a></li>
                        <li><a href="http://physics.stackexchange.com/" title="active researchers, academics and students of physics">Physics</a></li>
                        <li><a href="http://chemistry.stackexchange.com/" title="scientists, academics, teachers and students">Chemistry</a></li>
                        <li><a href="http://biology.stackexchange.com/" title="biology researchers, academics, and students">Biology</a></li>
                        <li><a href="http://cs.stackexchange.com/" title="students, researchers and practitioners of computer science">Computer Science</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://philosophy.stackexchange.com/" title="those interested in the study of the fundamental nature of knowledge, reality, and existence">Philosophy</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#science" class="more">
                                more (3)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://meta.stackexchange.com/" title="meta-discussion of the Stack Exchange family of Q&amp;A websites">Meta Stack Exchange</a></li>
                        <li><a href="http://stackapps.com/" title="apps, scripts, and development with the Stack Exchange API">Stack Apps</a></li>
                        <li><a href="http://area51.stackexchange.com/" title="proposing new sites in the Stack Exchange network">Area 51</a></li>
                        <li><a href="http://talent.stackoverflow.com/">Stack Overflow Talent</a></li>
                    
                </ol>
            </td>
    </tr>
</tbody></table>
                </div>
            </div>
            <div id="copyright">
                site design / logo © 2016 Stack Exchange Inc; user contributions licensed under <a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc by-sa 3.0</a> 
                with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a>
            </div>
            <div id="svnrev">
                rev 2016.10.26.4146
            </div>
                </div>
    </div>
    <noscript>
        &lt;div id="noscript-warning"&gt;Code Review Stack Exchange works best with JavaScript enabled&lt;img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"&gt;&lt;/div&gt;
    </noscript>

    <script>
            (function(i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m);
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
            
            ga('create', 'UA-5620270-24', {'cookieDomain': 'stackexchange.com'});
            ga('set', 'dimension2', '|java|thread-safety|concurrency|rest|');             ga('send', 'pageview');
        
        var _qevents = _qevents || [],
            _comscore = _comscore || [];
        (function () {
            var ssl='https:'==document.location.protocol,
                s=document.getElementsByTagName('script')[0],
                qc=document.createElement('script');
                qc.async = true;
                qc.src = (ssl ? 'https://secure' : 'http://edge') + '.quantserve.com/quant.js';
                s.parentNode.insertBefore(qc, s);
                _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
                            var sc=document.createElement('script');
                sc.async=true;
                sc.src=(ssl?'https://sb':'http://b') + '.scorecardresearch.com/beacon.js';
                s.parentNode.insertBefore(sc, s);
                _comscore.push({ c1: "2", c2: "17440561" });
        })();

    </script>
        
    
            <script type="text/javascript">
                
                (function(appendChild) {
                    Node.prototype.appendChild = function() {
                        var parent = this;
                        var newNode = arguments[0];
                        if (parent.nodeName === 'HEAD'
                            && newNode
                            && newNode.nodeName === 'SCRIPT'
                            && newNode.src) {
                            
                            window.setTimeout(function() {
                                var result = newNode.src.match(/^https:\/\/maps\.googleapis\.com\/maps\/api\/place\/js\/(\w+)Service\./i) || [];
                                var service = result[1];
                                if (service) {
                                    if (service === 'Autocompletion') service =  2;
                                    else if (service === 'Place') service = 1;
                                    else service = 0;
                                    StackExchange.using('gps', function() {
                                        StackExchange.gps.track('google_maps_places_api.call', { service: service });
                                    });
                                }
                            }, 0);
                        }
                        return appendChild.apply(this, arguments);
                    };
                })(Node.prototype.appendChild);
            </script>
    
</body></html>